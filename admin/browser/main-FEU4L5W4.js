import{A as uu,B as oi,C as dt,D as ee,E as Br,F as zs,G as hu,H as mn,I as si,J as mu,K as fu,L as be,M as ut,a as f,b as hn,c as Vr,d as eu,e as nu,f as it,g as iu,h as Us,i as ru,j as $t,k as ou,l as su,m as jr,n as Z,o as au,p as cu,q as Rt,r as ge,s as Ur,t as ri,u as lu,v as du,w,x as pt,y as J,z as Bs}from"./chunk-EHDWPQWQ.js";import{$ as xd,$a as cn,A as nn,Aa as vt,Ab as un,B as rn,Ba as Ts,Bb as zd,C as bd,Ca as Xn,Cb as Ve,D as Es,Da as Jn,Db as Hd,E as le,Ea as at,Eb as $d,F as _d,Fa as F,Fb as ct,G as vd,Ga as ti,Gb as Wd,H as Er,Ha as Rd,Hb as js,I as zt,Ia as Dr,Ib as Gd,J as Is,Ja as Rr,Jb as qd,K as yd,Ka as kd,Kb as ni,L as qn,La as L,Lb as Kd,M as wd,Ma as Ds,Mb as Yd,N as xs,Na as Md,Nb as Qd,O as Cd,Oa as Jt,Ob as Lr,P as Ed,Pa as Nd,Pb as Zd,Q as Ir,Qa as Rs,Qb as Xd,R as Q,Ra as Od,Rb as ii,S as Ss,Sa as ei,Sb as Jd,T as xr,Ta as Oe,Tb as tu,U as nt,Ua as Pe,V as Id,Va as fe,W as H,Wa as W,X as de,Xa as V,Y as Kn,Ya as te,Z as C,Za as kr,_ as k,_a as Vt,a as ud,aa as T,ab as Pd,b as hd,ba as As,bb as K,c as ae,ca as p,cb as ks,d as vs,da as v,db as pe,e as ys,ea as Yn,eb as Ms,f as Lt,fa as Sd,fb as Ns,g as At,ga as Qn,gb as Os,h as wr,ha as Ht,hb as Fe,i as md,ia as _t,ib as Le,j as ce,ja as M,jb as ln,k as Ne,ka as X,kb as Fd,l as tn,la as Sr,lb as Mr,m as et,ma as Ad,mb as Ld,n as _,na as on,nb as Nr,o as Wn,oa as ue,ob as Or,p as fd,pa as sn,pb as Ps,q as pd,qa as he,qb as Pr,r as I,ra as me,rb as Fs,s as en,sa as an,sb as Vd,t as bt,ta as Ar,tb as Ls,u as ws,ua as Tr,ub as Fr,v as Cr,va as Tt,vb as jd,w as Cs,wa as Dt,wb as Vs,x as gd,xa as Td,xb as dn,y as Gn,ya as Zn,yb as Ud,z as Xt,za as Dd,zb as Bd}from"./chunk-6EQJZ34O.js";import{a as b,b as U,f as St}from"./chunk-CQCHLVVT.js";var Ws=class extends $d{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Gs=class e extends Ws{static makeCurrent(){Hd(new e)}onAndCancel(t,n,i){return t.addEventListener(n,i),()=>{t.removeEventListener(n,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=og();return n==null?null:sg(n)}resetBaseElement(){ai=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Kd(document.cookie,t)}},ai=null;function og(){return ai=ai||document.querySelector("base"),ai?ai.getAttribute("href"):null}function sg(e){return new URL(e,document.baseURI).pathname}var qs=class{addToWindow(t){de.getAngularTestability=(i,r=!0)=>{let o=t.findTestabilityInTree(i,r);if(o==null)throw new H(5103,!1);return o},de.getAllAngularTestabilities=()=>t.getAllTestabilities(),de.getAllAngularRootElements=()=>t.getAllRootElements();let n=i=>{let r=de.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&i()};r.forEach(a=>{a.whenStable(s)})};de.frameworkStabilizers||(de.frameworkStabilizers=[]),de.frameworkStabilizers.push(n)}findTestabilityInTree(t,n,i){if(n==null)return null;let r=t.getTestability(n);return r??(i?Ve().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},ag=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})(),Ks=new T(""),bu=(()=>{let t=class t{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(i,r),r}};t.\u0275fac=function(r){return new(r||t)(p(Ks),p(L))},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})(),zr=class{constructor(t){this._doc=t}},Hs="ng-app-id",_u=(()=>{let t=class t{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ii(s),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Hs}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute(Hs),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Hs,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};t.\u0275fac=function(r){return new(r||t)(p(ct),p(Zn),p(Xn,8),p(vt))},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})(),$s={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Qs=/%COMP%/g,vu="%COMP%",cg=`_nghost-${vu}`,lg=`_ngcontent-${vu}`,dg=!0,ug=new T("",{providedIn:"root",factory:()=>dg});function hg(e){return lg.replace(Qs,e)}function mg(e){return cg.replace(Qs,e)}function yu(e,t){return t.map(n=>n.replace(Qs,e))}var Hr=(()=>{let t=class t{constructor(i,r,o,s,a,c,l,d=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=ii(c),this.defaultRenderer=new ci(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Qn.ShadowDom&&(r=U(b({},r),{encapsulation:Qn.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof $r?o.applyToHost(i):o instanceof li&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Qn.Emulated:s=new $r(l,d,r,this.appId,u,a,c,h);break;case Qn.ShadowDom:return new Ys(l,d,i,r,a,c,this.nonce,h);default:s=new li(l,d,r,u,a,c,h);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(r){return new(r||t)(p(bu),p(_u),p(Zn),p(ug),p(ct),p(vt),p(L),p(Xn))},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})(),ci=class{constructor(t,n,i,r){this.eventManager=t,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS($s[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(pu(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(pu(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new H(-5104,!1);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,r){if(r){n=r+":"+n;let o=$s[r];o?t.setAttributeNS(o,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){let r=$s[i];r?t.removeAttributeNS(r,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,r){r&(Jn.DashCase|Jn.Important)?t.style.setProperty(n,i,r&Jn.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&Jn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t!=null&&(t[n]=i)}setValue(t,n){t.nodeValue=n}listen(t,n,i){if(typeof t=="string"&&(t=Ve().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(i))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function pu(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Ys=class extends ci{constructor(t,n,i,r,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=yu(r.id,r.styles);for(let d of l){let u=document.createElement("style");a&&u.setAttribute("nonce",a),u.textContent=d,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},li=class extends ci{constructor(t,n,i,r,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?yu(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},$r=class extends li{constructor(t,n,i,r,o,s,a,c){let l=r+"-"+i.id;super(t,n,i,o,s,a,c,l),this.contentAttr=hg(l),this.hostAttr=mg(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}},fg=(()=>{let t=class t extends zr{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};t.\u0275fac=function(r){return new(r||t)(p(ct))},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})(),gu=["alt","control","meta","shift"],pg={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gg={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},bg=(()=>{let t=class t extends zr{constructor(i){super(i)}supports(i){return t.parseEventName(i)!=null}addEventListener(i,r,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ve().onAndCancel(i,s.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=t._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),gu.forEach(d=>{let u=r.indexOf(d);u>-1&&(r.splice(u,1),a+=d+".")}),a+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let o=pg[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),gu.forEach(a=>{if(a!==o){let c=gg[a];c(i)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{t.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return i==="esc"?"escape":i}};t.\u0275fac=function(r){return new(r||t)(p(ct))},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})();function _g(){Gs.makeCurrent()}function vg(){return new Tr}function yg(){return Td(document),document}var wg=[{provide:vt,useValue:Zd},{provide:Dd,useValue:_g,multi:!0},{provide:ct,useFactory:yg,deps:[]}],wu=jd(Ud,"browser",wg),Cg=new T(""),Eg=[{provide:Nr,useClass:qs,deps:[]},{provide:Ld,useClass:Or,deps:[L,Ps,Nr]},{provide:Or,useClass:Or,deps:[L,Ps,Nr]}],Ig=[{provide:Ad,useValue:"root"},{provide:Tr,useFactory:vg,deps:[]},{provide:Ks,useClass:fg,multi:!0,deps:[ct,L,vt]},{provide:Ks,useClass:bg,multi:!0,deps:[ct]},Hr,_u,bu,{provide:Dr,useExisting:Hr},{provide:tu,useClass:ag,deps:[]},[]],Cu=(()=>{let t=class t{constructor(i){}static withServerTransition(i){return{ngModule:t,providers:[{provide:Zn,useValue:i.appId}]}}};t.\u0275fac=function(r){return new(r||t)(p(Cg,12))},t.\u0275mod=M({type:t}),t.\u0275inj=k({providers:[...Ig,...Eg],imports:[Lr,Bd]});let e=t;return e})();var Eu=(()=>{let t=class t{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};t.\u0275fac=function(r){return new(r||t)(p(ct))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var x="primary",Ii=Symbol("RouteTitle"),ea=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function _n(e){return new ea(e)}function Ag(e,t,n){let i=n.path.split("/");if(i.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||i.length<e.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=e[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function Tg(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Wt(e[n],t[n]))return!1;return!0}function Wt(e,t){let n=e?na(e):void 0,i=t?na(t):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!Pu(e[r],t[r]))return!1;return!0}function na(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Pu(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),i=[...t].sort();return n.every((r,o)=>i[o]===r)}else return e===t}function Fu(e){return e.length>0?e[e.length-1]:null}function we(e){return fd(e)?e:Pr(e)?et(Promise.resolve(e)):_(e)}var Dg={exact:Vu,subset:ju},Lu={exact:Rg,subset:kg,ignored:()=>!0};function xu(e,t,n){return Dg[n.paths](e.root,t.root,n.matrixParams)&&Lu[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function Rg(e,t){return Wt(e,t)}function Vu(e,t,n){if(!Ue(e.segments,t.segments)||!qr(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!e.children[i]||!Vu(e.children[i],t.children[i],n))return!1;return!0}function kg(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Pu(e[n],t[n]))}function ju(e,t,n){return Uu(e,t,t.segments,n)}function Uu(e,t,n,i){if(e.segments.length>n.length){let r=e.segments.slice(0,n.length);return!(!Ue(r,n)||t.hasChildren()||!qr(r,n,i))}else if(e.segments.length===n.length){if(!Ue(e.segments,n)||!qr(e.segments,n,i))return!1;for(let r in t.children)if(!e.children[r]||!ju(e.children[r],t.children[r],i))return!1;return!0}else{let r=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!Ue(e.segments,r)||!qr(e.segments,r,i)||!e.children[x]?!1:Uu(e.children[x],t,o,i)}}function qr(e,t,n){return t.every((i,r)=>Lu[n](e[r].parameters,i.parameters))}var _e=class{constructor(t=new P([],{}),n={},i=null){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=_n(this.queryParams),this._queryParamMap}toString(){return Og.serialize(this)}},P=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kr(this)}},je=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=_n(this.parameters),this._parameterMap}toString(){return zu(this)}};function Mg(e,t){return Ue(e,t)&&e.every((n,i)=>Wt(n.parameters,t[i].parameters))}function Ue(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.path===t[i].path)}function Ng(e,t){let n=[];return Object.entries(e.children).forEach(([i,r])=>{i===x&&(n=n.concat(t(r,i)))}),Object.entries(e.children).forEach(([i,r])=>{i!==x&&(n=n.concat(t(r,i)))}),n}var xi=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:()=>new gi,providedIn:"root"});let e=t;return e})(),gi=class{parse(t){let n=new ra(t);return new _e(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${di(t.root,!0)}`,i=Lg(t.queryParams),r=typeof t.fragment=="string"?`#${Pg(t.fragment)}`:"";return`${n}${i}${r}`}},Og=new gi;function Kr(e){return e.segments.map(t=>zu(t)).join("/")}function di(e,t){if(!e.hasChildren())return Kr(e);if(t){let n=e.children[x]?di(e.children[x],!1):"",i=[];return Object.entries(e.children).forEach(([r,o])=>{r!==x&&i.push(`${r}:${di(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=Ng(e,(i,r)=>r===x?[di(e.children[x],!1)]:[`${r}:${di(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[x]!=null?`${Kr(e)}/${n[0]}`:`${Kr(e)}/(${n.join("//")})`}}function Bu(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wr(e){return Bu(e).replace(/%3B/gi,";")}function Pg(e){return encodeURI(e)}function ia(e){return Bu(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yr(e){return decodeURIComponent(e)}function Su(e){return Yr(e.replace(/\+/g,"%20"))}function zu(e){return`${ia(e.path)}${Fg(e.parameters)}`}function Fg(e){return Object.entries(e).map(([t,n])=>`;${ia(t)}=${ia(n)}`).join("")}function Lg(e){let t=Object.entries(e).map(([n,i])=>Array.isArray(i)?i.map(r=>`${Wr(n)}=${Wr(r)}`).join("&"):`${Wr(n)}=${Wr(i)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var Vg=/^[^\/()?;#]+/;function Zs(e){let t=e.match(Vg);return t?t[0]:""}var jg=/^[^\/()?;=#]+/;function Ug(e){let t=e.match(jg);return t?t[0]:""}var Bg=/^[^=?&#]+/;function zg(e){let t=e.match(Bg);return t?t[0]:""}var Hg=/^[^&#]+/;function $g(e){let t=e.match(Hg);return t?t[0]:""}var ra=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new P([],{}):new P([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[x]=new P(t,n)),i}parseSegment(){let t=Zs(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(t),new je(Yr(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=Ug(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=Zs(this.remaining);r&&(i=r,this.capture(i))}t[Yr(n)]=Yr(i)}parseQueryParam(t){let n=zg(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=$g(this.remaining);s&&(i=s,this.capture(i))}let r=Su(n),o=Su(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Zs(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new H(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=x);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[x]:new P([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new H(4011,!1)}};function Hu(e){return e.segments.length>0?new P([],{[x]:e}):e}function $u(e){let t={};for(let[i,r]of Object.entries(e.children)){let o=$u(r);if(i===x&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let n=new P(e.segments,t);return Wg(n)}function Wg(e){if(e.numberOfChildren===1&&e.children[x]){let t=e.children[x];return new P(e.segments.concat(t.segments),t.children)}return e}function vn(e){return e instanceof _e}function Gg(e,t,n=null,i=null){let r=Wu(e);return Gu(r,t,n,i)}function Wu(e){let t;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new P(o.url,s);return o===e&&(t=a),a}let i=n(e.root),r=Hu(i);return t??r}function Gu(e,t,n,i){let r=e;for(;r.parent;)r=r.parent;if(t.length===0)return Xs(r,r,r,n,i);let o=qg(t);if(o.toRoot())return Xs(r,r,new P([],{}),n,i);let s=Kg(o,r,e),a=s.processChildren?mi(s.segmentGroup,s.index,o.commands):Ku(s.segmentGroup,s.index,o.commands);return Xs(r,s.segmentGroup,a,n,i)}function Qr(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function bi(e){return typeof e=="object"&&e!=null&&e.outlets}function Xs(e,t,n,i,r){let o={};i&&Object.entries(i).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;e===t?s=n:s=qu(e,t,n);let a=Hu($u(s));return new _e(a,o,r)}function qu(e,t,n){let i={};return Object.entries(e.children).forEach(([r,o])=>{o===t?i[r]=n:i[r]=qu(o,t,n)}),new P(e.segments,i)}var Zr=class{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&Qr(i[0]))throw new H(4003,!1);let r=i.find(bi);if(r&&r!==Fu(i))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function qg(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Zr(!0,0,e);let t=0,n=!1,i=e.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Zr(n,t,i)}var gn=class{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}};function Kg(e,t,n){if(e.isAbsolute)return new gn(t,!0,0);if(!n)return new gn(t,!1,NaN);if(n.parent===null)return new gn(n,!0,0);let i=Qr(e.commands[0])?0:1,r=n.segments.length-1+i;return Yg(n,r,e.numberOfDoubleDots)}function Yg(e,t,n){let i=e,r=t,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new H(4005,!1);r=i.segments.length}return new gn(i,!1,r-o)}function Qg(e){return bi(e[0])?e[0].outlets:{[x]:e}}function Ku(e,t,n){if(e??=new P([],{}),e.segments.length===0&&e.hasChildren())return mi(e,t,n);let i=Zg(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let o=new P(e.segments.slice(0,i.pathIndex),{});return o.children[x]=new P(e.segments.slice(i.pathIndex),e.children),mi(o,0,r)}else return i.match&&r.length===0?new P(e.segments,{}):i.match&&!e.hasChildren()?oa(e,t,n):i.match?mi(e,0,r):oa(e,t,n)}function mi(e,t,n){if(n.length===0)return new P(e.segments,{});{let i=Qg(n),r={};if(Object.keys(i).some(o=>o!==x)&&e.children[x]&&e.numberOfChildren===1&&e.children[x].segments.length===0){let o=mi(e.children[x],t,n);return new P(e.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=Ku(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new P(e.segments,r)}}function Zg(e,t,n){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=n.length)return o;let s=e.segments[r],a=n[i];if(bi(a))break;let c=`${a}`,l=i<n.length-1?n[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Tu(c,l,s))return o;i+=2}else{if(!Tu(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function oa(e,t,n){let i=e.segments.slice(0,t),r=0;for(;r<n.length;){let o=n[r];if(bi(o)){let c=Xg(o.outlets);return new P(i,c)}if(r===0&&Qr(n[0])){let c=e.segments[t];i.push(new je(c.path,Au(n[0]))),r++;continue}let s=bi(o)?o.outlets[x]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&Qr(a)?(i.push(new je(s,Au(a))),r+=2):(i.push(new je(s,{})),r++)}return new P(i,{})}function Xg(e){let t={};return Object.entries(e).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[n]=oa(new P([],{}),0,i))}),t}function Au(e){let t={};return Object.entries(e).forEach(([n,i])=>t[n]=`${i}`),t}function Tu(e,t,n){return e==n.path&&Wt(t,n.parameters)}var fi="imperative",rt=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(rt||{}),kt=class{constructor(t,n){this.id=t,this.url=n}},yn=class extends kt{constructor(t,n,i="imperative",r=null){super(t,n),this.type=rt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ne=class extends kt{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i,this.type=rt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},wt=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(wt||{}),Xr=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Xr||{}),ve=class extends kt{constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r,this.type=rt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ye=class extends kt{constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r,this.type=rt.NavigationSkipped}},_i=class extends kt{constructor(t,n,i,r){super(t,n),this.error=i,this.target=r,this.type=rt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Jr=class extends kt{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=rt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sa=class extends kt{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=rt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},aa=class extends kt{constructor(t,n,i,r,o){super(t,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=rt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ca=class extends kt{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=rt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},la=class extends kt{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=rt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},da=class{constructor(t){this.route=t,this.type=rt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ua=class{constructor(t){this.route=t,this.type=rt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ha=class{constructor(t){this.snapshot=t,this.type=rt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ma=class{constructor(t){this.snapshot=t,this.type=rt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fa=class{constructor(t){this.snapshot=t,this.type=rt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pa=class{constructor(t){this.snapshot=t,this.type=rt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},to=class{constructor(t,n,i){this.routerEvent=t,this.position=n,this.anchor=i,this.type=rt.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},vi=class{},yi=class{constructor(t){this.url=t}};var ga=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Si,this.attachRef=null}},Si=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new ga,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),eo=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=ba(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){let n=ba(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=_a(t,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return _a(t,this._root).map(n=>n.value)}};function ba(e,t){if(e===t.value)return t;for(let n of t.children){let i=ba(e,n);if(i)return i}return null}function _a(e,t){if(e===t.value)return[t];for(let n of t.children){let i=_a(e,n);if(i.length)return i.unshift(t),i}return[]}var yt=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function pn(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var no=class extends eo{constructor(t,n){super(t),this.snapshot=n,Ta(this,t)}toString(){return this.snapshot.toString()}};function Yu(e){let t=Jg(e),n=new At([new je("",{})]),i=new At({}),r=new At({}),o=new At({}),s=new At(""),a=new wn(n,i,o,s,r,x,e,t.root);return a.snapshot=t.root,new no(new yt(a,[]),t)}function Jg(e){let t={},n={},i={},r="",o=new wi([],t,i,r,n,x,e,null,{});return new io("",new yt(o,[]))}var wn=class{constructor(t,n,i,r,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(I(l=>l[Ii]))??_(void 0),this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(I(t=>_n(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(I(t=>_n(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Aa(e,t,n="emptyOnly"){let i,{routeConfig:r}=e;return t!==null&&(n==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:b(b({},t.params),e.params),data:b(b({},t.data),e.data),resolve:b(b(b(b({},e.data),t.data),r?.data),e._resolvedData)}:i={params:b({},e.params),data:b({},e.data),resolve:b(b({},e.data),e._resolvedData??{})},r&&Zu(r)&&(i.resolve[Ii]=r.title),i}var wi=class{get title(){return this.data?.[Ii]}constructor(t,n,i,r,o,s,a,c,l){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=_n(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=_n(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},io=class extends eo{constructor(t,n){super(n),this.url=t,Ta(this,n)}toString(){return Qu(this._root)}};function Ta(e,t){t.value._routerState=e,t.children.forEach(n=>Ta(e,n))}function Qu(e){let t=e.children.length>0?` { ${e.children.map(Qu).join(", ")} } `:"";return`${e.value}${t}`}function Js(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Wt(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Wt(t.params,n.params)||e.paramsSubject.next(n.params),Tg(t.url,n.url)||e.urlSubject.next(n.url),Wt(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function va(e,t){let n=Wt(e.params,t.params)&&Mg(e.url,t.url),i=!e.parent!=!t.parent;return n&&!i&&(!e.parent||va(e.parent,t.parent))}function Zu(e){return typeof e.title=="string"||e.title===null}var Da=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=x,this.activateEvents=new Dt,this.deactivateEvents=new Dt,this.attachEvents=new Dt,this.detachEvents=new Dt,this.parentContexts=v(Si),this.location=v(Md),this.changeDetector=v(dn),this.environmentInjector=v(on),this.inputBinder=v(lo,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=i;let o=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new ya(i,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=X({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[sn]});let e=t;return e})(),ya=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===wn?this.route:t===Si?this.childContexts:this.parent.get(t,n)}},lo=new T(""),Du=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,o=en([r.queryParams,r.params,r.data]).pipe(Q(([s,a,c],l)=>(c=b(b(b({},s),a),c),l===0?_(c):Promise.resolve(c)))).subscribe(s=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let a=zd(r.component);if(!a){this.unsubscribeFromRouteData(i);return}for(let{templateName:c}of a.inputs)i.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(i,o)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})();function tb(e,t,n){let i=Ci(e,t._root,n?n._root:void 0);return new no(i,t)}function Ci(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=t.value;let r=eb(e,t,n);return new yt(i,r)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Ci(e,a)),s}}let i=nb(t.value),r=t.children.map(o=>Ci(e,o));return new yt(i,r)}}function eb(e,t,n){return t.children.map(i=>{for(let r of n.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return Ci(e,i,r);return Ci(e,i)})}function nb(e){return new wn(new At(e.url),new At(e.params),new At(e.queryParams),new At(e.fragment),new At(e.data),e.outlet,e.component,e)}var Xu="ngNavigationCancelingError";function Ju(e,t){let{redirectTo:n,navigationBehaviorOptions:i}=vn(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=th(!1,wt.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function th(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[Xu]=!0,n.cancellationCode=t,n}function ib(e){return eh(e)&&vn(e.url)}function eh(e){return!!e&&e[Xu]}var rb=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=_t({type:t,selectors:[["ng-component"]],standalone:!0,features:[Le],decls:1,vars:0,template:function(r,o){r&1&&te(0,"router-outlet")},dependencies:[Da],encapsulation:2});let e=t;return e})();function ob(e,t){return e.providers&&!e._injector&&(e._injector=Rs(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Ra(e){let t=e.children&&e.children.map(Ra),n=t?U(b({},e),{children:t}):b({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==x&&(n.component=rb),n}function Gt(e){return e.outlet||x}function sb(e,t){let n=e.filter(i=>Gt(i)===t);return n.push(...e.filter(i=>Gt(i)!==t)),n}function Ai(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var ab=(e,t,n,i)=>I(r=>(new wa(t,r.targetRouterState,r.currentRouterState,n,i).activate(e),r)),wa=class{constructor(t,n,i,r,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),Js(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){let r=pn(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,n,i){let r=t.value,o=n?n.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=pn(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=pn(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,n,i){let r=pn(n);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new pa(o.value.snapshot))}),t.children.length&&this.forwardEvent(new ma(t.value.snapshot))}activateRoutes(t,n,i){let r=t.value,o=n?n.value:null;if(Js(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Js(a.route.value),this.activateChildRoutes(t,null,s.children)}else{let a=Ai(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,i)}},ro=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},bn=class{constructor(t,n){this.component=t,this.route=n}};function cb(e,t,n){let i=e._root,r=t?t._root:null;return ui(i,r,n,[i.value])}function lb(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function En(e,t){let n=Symbol(),i=t.get(e,n);return i===n?typeof e=="function"&&!xd(e)?e:t.get(e):i}function ui(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=pn(t);return e.children.forEach(s=>{db(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>pi(a,n.getContext(s),r)),r}function db(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=ub(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new ro(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ui(e,t,a?a.children:null,i,r):ui(e,t,n,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new bn(a.outlet.component,s))}else s&&pi(t,a,r),r.canActivateChecks.push(new ro(i)),o.component?ui(e,null,a?a.children:null,i,r):ui(e,null,n,i,r);return r}function ub(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Ue(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Ue(e.url,t.url)||!Wt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!va(e,t)||!Wt(e.queryParams,t.queryParams);case"paramsChange":default:return!va(e,t)}}function pi(e,t,n){let i=pn(e),r=e.value;Object.entries(i).forEach(([o,s])=>{r.component?t?pi(s,t.children.getContext(o),n):pi(s,null,n):pi(s,t,n)}),r.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new bn(t.outlet.component,r)):n.canDeactivateChecks.push(new bn(null,r)):n.canDeactivateChecks.push(new bn(null,r))}function Ti(e){return typeof e=="function"}function hb(e){return typeof e=="boolean"}function mb(e){return e&&Ti(e.canLoad)}function fb(e){return e&&Ti(e.canActivate)}function pb(e){return e&&Ti(e.canActivateChild)}function gb(e){return e&&Ti(e.canDeactivate)}function bb(e){return e&&Ti(e.canMatch)}function nh(e){return e instanceof pd||e?.name==="EmptyError"}var Gr=Symbol("INITIAL_VALUE");function Cn(){return Q(e=>en(e.map(t=>t.pipe(le(1),Ir(Gr)))).pipe(I(t=>{for(let n of t)if(n!==!0){if(n===Gr)return Gr;if(n===!1||n instanceof _e)return n}return!0}),Xt(t=>t!==Gr),le(1)))}function _b(e,t){return bt(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?_(U(b({},n),{guardsResult:!0})):vb(s,i,r,e).pipe(bt(a=>a&&hb(a)?yb(i,o,e,t):_(a)),I(a=>U(b({},n),{guardsResult:a})))})}function vb(e,t,n,i){return et(e).pipe(bt(r=>xb(r.component,r.route,n,t,i)),zt(r=>r!==!0,!0))}function yb(e,t,n,i){return et(t).pipe(rn(r=>Cr(Cb(r.route.parent,i),wb(r.route,i),Ib(e,r.path,n),Eb(e,r.route,n))),zt(r=>r!==!0,!0))}function wb(e,t){return e!==null&&t&&t(new fa(e)),_(!0)}function Cb(e,t){return e!==null&&t&&t(new ha(e)),_(!0)}function Eb(e,t,n){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return _(!0);let r=i.map(o=>Cs(()=>{let s=Ai(t)??n,a=En(o,s),c=fb(a)?a.canActivate(t,e):ue(s,()=>a(t,e));return we(c).pipe(zt())}));return _(r).pipe(Cn())}function Ib(e,t,n){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>lb(s)).filter(s=>s!==null).map(s=>Cs(()=>{let a=s.guards.map(c=>{let l=Ai(s.node)??n,d=En(c,l),u=pb(d)?d.canActivateChild(i,e):ue(l,()=>d(i,e));return we(u).pipe(zt())});return _(a).pipe(Cn())}));return _(o).pipe(Cn())}function xb(e,t,n,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return _(!0);let s=o.map(a=>{let c=Ai(t)??r,l=En(a,c),d=gb(l)?l.canDeactivate(e,t,n,i):ue(c,()=>l(e,t,n,i));return we(d).pipe(zt())});return _(s).pipe(Cn())}function Sb(e,t,n,i){let r=t.canLoad;if(r===void 0||r.length===0)return _(!0);let o=r.map(s=>{let a=En(s,e),c=mb(a)?a.canLoad(t,n):ue(e,()=>a(t,n));return we(c)});return _(o).pipe(Cn(),ih(i))}function ih(e){return hd(nt(t=>{if(vn(t))throw Ju(e,t)}),I(t=>t===!0))}function Ab(e,t,n,i){let r=t.canMatch;if(!r||r.length===0)return _(!0);let o=r.map(s=>{let a=En(s,e),c=bb(a)?a.canMatch(t,n):ue(e,()=>a(t,n));return we(c)});return _(o).pipe(Cn(),ih(i))}var Ei=class{constructor(t){this.segmentGroup=t||null}},oo=class extends Error{constructor(t){super(),this.urlTree=t}};function fn(e){return Wn(new Ei(e))}function Tb(e){return Wn(new H(4e3,!1))}function Db(e){return Wn(th(!1,wt.GuardRejected))}var Ca=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return _(i);if(r.numberOfChildren>1||!r.children[x])return Tb(t.redirectTo);r=r.children[x]}}applyRedirectCommands(t,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,i);if(n.startsWith("/"))throw new oo(r);return r}applyRedirectCreateUrlTree(t,n,i,r){let o=this.createSegmentGroup(t,n.root,i,r);return new _e(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);i[r]=n[a]}else i[r]=o}),i}createSegmentGroup(t,n,i,r){let o=this.createSegments(t,n.segments,i,r),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,i,r)}),new P(o,s)}createSegments(t,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,n,i){let r=i[n.path.substring(1)];if(!r)throw new H(4001,!1);return r}findOrReturn(t,n){let i=0;for(let r of n){if(r.path===t.path)return n.splice(i),r;i++}return t}},Ea={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Rb(e,t,n,i,r){let o=ka(e,t,n);return o.matched?(i=ob(t,i),Ab(i,t,n,r).pipe(I(s=>s===!0?o:b({},Ea)))):_(o)}function ka(e,t,n){if(t.path==="**")return kb(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?b({},Ea):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(t.matcher||Ag)(n,e,t);if(!r)return b({},Ea);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?b(b({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function kb(e){return{matched:!0,parameters:e.length>0?Fu(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function Ru(e,t,n,i){return n.length>0&&Ob(e,n,i)?{segmentGroup:new P(t,Nb(i,new P(n,e.children))),slicedSegments:[]}:n.length===0&&Pb(e,n,i)?{segmentGroup:new P(e.segments,Mb(e,n,i,e.children)),slicedSegments:n}:{segmentGroup:new P(e.segments,e.children),slicedSegments:n}}function Mb(e,t,n,i){let r={};for(let o of n)if(uo(e,t,o)&&!i[Gt(o)]){let s=new P([],{});r[Gt(o)]=s}return b(b({},i),r)}function Nb(e,t){let n={};n[x]=t;for(let i of e)if(i.path===""&&Gt(i)!==x){let r=new P([],{});n[Gt(i)]=r}return n}function Ob(e,t,n){return n.some(i=>uo(e,t,i)&&Gt(i)!==x)}function Pb(e,t,n){return n.some(i=>uo(e,t,i))}function uo(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Fb(e,t,n,i){return Gt(e)!==i&&(i===x||!uo(t,n,e))?!1:ka(t,e,n).matched}function Lb(e,t,n){return t.length===0&&!e.children[n]}var Ia=class{};function Vb(e,t,n,i,r,o,s="emptyOnly"){return new xa(e,t,n,i,r,s,o).recognize()}var jb=31,xa=class{constructor(t,n,i,r,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ca(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new H(4002,`'${t.segmentGroup}'`)}recognize(){let t=Ru(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(I(n=>{let i=new wi([],Object.freeze({}),Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,{},x,this.rootComponentType,null,{}),r=new yt(i,n),o=new io("",r),s=Gg(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,x).pipe(nn(i=>{if(i instanceof oo)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ei?this.noMatchError(i):i}))}inheritParamsAndData(t,n){let i=t.value,r=Aa(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),t.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(t,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,n,i):this.processSegment(t,n,i,i.segments,r,!0).pipe(I(o=>o instanceof yt?[o]:[]))}processChildren(t,n,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return et(r).pipe(rn(o=>{let s=i.children[o],a=sb(n,o);return this.processSegmentGroup(t,a,s,o)}),qn((o,s)=>(o.push(...s),o)),Es(null),yd(),bt(o=>{if(o===null)return fn(i);let s=rh(o);return Ub(s),_(s)}))}processSegment(t,n,i,r,o,s){return et(n).pipe(rn(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,i,r,o,s).pipe(nn(c=>{if(c instanceof Ei)return _(null);throw c}))),zt(a=>!!a),nn(a=>{if(nh(a))return Lb(i,r,o)?_(new Ia):fn(i);throw a}))}processSegmentAgainstRoute(t,n,i,r,o,s,a){return Fb(i,r,o,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,n,i,o,s):fn(r):fn(r)}expandSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:d}=ka(n,r,o);if(!a)return fn(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>jb&&(this.allowRedirects=!1));let u=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,u).pipe(bt(h=>this.processSegment(t,i,n,h.concat(d),s,!1)))}matchSegmentAgainstRoute(t,n,i,r,o){let s=Rb(n,i,r,t,this.urlSerializer);return i.path==="**"&&(n.children={}),s.pipe(Q(a=>a.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(Q(({routes:c})=>{let l=i._loadedInjector??t,{consumedSegments:d,remainingSegments:u,parameters:h}=a,m=new wi(d,h,Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,zb(i),Gt(i),i.component??i._loadedComponent??null,i,Hb(i)),{segmentGroup:g,slicedSegments:y}=Ru(n,d,u,c);if(y.length===0&&g.hasChildren())return this.processChildren(l,c,g).pipe(I($=>$===null?null:new yt(m,$)));if(c.length===0&&y.length===0)return _(new yt(m,[]));let R=Gt(i)===o;return this.processSegment(l,c,g,y,R?x:o,!0).pipe(I($=>new yt(m,$ instanceof yt?[$]:[])))}))):fn(n)))}getChildConfig(t,n,i){return n.children?_({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?_({routes:n._loadedRoutes,injector:n._loadedInjector}):Sb(t,n,i,this.urlSerializer).pipe(bt(r=>r?this.configLoader.loadChildren(t,n).pipe(nt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):Db(n))):_({routes:[],injector:t})}};function Ub(e){e.sort((t,n)=>t.value.outlet===x?-1:n.value.outlet===x?1:t.value.outlet.localeCompare(n.value.outlet))}function Bb(e){let t=e.value.routeConfig;return t&&t.path===""}function rh(e){let t=[],n=new Set;for(let i of e){if(!Bb(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):t.push(i)}for(let i of n){let r=rh(i.children);t.push(new yt(i.value,r))}return t.filter(i=>!n.has(i))}function zb(e){return e.data||{}}function Hb(e){return e.resolve||{}}function $b(e,t,n,i,r,o){return bt(s=>Vb(e,t,n,i,s.extractedUrl,r,o).pipe(I(({state:a,tree:c})=>U(b({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Wb(e,t){return bt(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return _(n);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of oh(c))s.add(l);let a=0;return et(s).pipe(rn(c=>o.has(c)?Gb(c,i,e,t):(c.data=Aa(c,c.parent,e).resolve,_(void 0))),nt(()=>a++),Is(1),bt(c=>a===s.size?_(n):ce))})}function oh(e){let t=e.children.map(n=>oh(n)).flat();return[e,...t]}function Gb(e,t,n,i){let r=e.routeConfig,o=e._resolve;return r?.title!==void 0&&!Zu(r)&&(o[Ii]=r.title),qb(o,e,t,i).pipe(I(s=>(e._resolvedData=s,e.data=Aa(e,e.parent,n).resolve,null)))}function qb(e,t,n,i){let r=na(e);if(r.length===0)return _({});let o={};return et(r).pipe(bt(s=>Kb(e[s],t,n,i).pipe(zt(),nt(a=>{o[s]=a}))),Is(1),_d(o),nn(s=>nh(s)?ce:Wn(s)))}function Kb(e,t,n,i){let r=Ai(t)??i,o=En(e,r),s=o.resolve?o.resolve(t,n):ue(r,()=>o(t,n));return we(s)}function ta(e){return Q(t=>{let n=e(t);return n?et(n).pipe(I(()=>t)):_(t)})}var sh=(()=>{let t=class t{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===x);return r}getResolvedTitleForRoute(i){return i.data[Ii]}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:()=>v(Yb),providedIn:"root"});let e=t;return e})(),Yb=(()=>{let t=class t extends sh{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};t.\u0275fac=function(r){return new(r||t)(p(Eu))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Di=new T("",{providedIn:"root",factory:()=>({})}),so=new T(""),Ma=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=v(Fr)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return _(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=we(i.loadComponent()).pipe(I(ah),nt(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),Er(()=>{this.componentLoaders.delete(i)})),o=new ys(r,()=>new Lt).pipe(vs());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return _({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Qb(r,this.compiler,i,this.onLoadEndListener).pipe(Er(()=>{this.childrenLoaders.delete(r)})),a=new ys(s,()=>new Lt).pipe(vs());return this.childrenLoaders.set(r,a),a}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Qb(e,t,n,i){return we(e.loadChildren()).pipe(I(ah),bt(r=>r instanceof Nd||Array.isArray(r)?_(r):et(t.compileModuleAsync(r))),I(r=>{i&&i(e);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(n).injector,s=o.get(so,[],{optional:!0,self:!0}).flat()),{routes:s.map(Ra),injector:o}}))}function Zb(e){return e&&typeof e=="object"&&"default"in e}function ah(e){return Zb(e)?e.default:e}var Na=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:()=>v(Xb),providedIn:"root"});let e=t;return e})(),Xb=(()=>{let t=class t{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),ch=new T(""),lh=new T("");function Jb(e,t,n){let i=e.get(lh),r=e.get(ct);return e.get(L).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=r.startViewTransition(()=>(o(),t_(e))),{onViewTransitionCreated:c}=i;return c&&ue(e,()=>c({transition:a,from:t,to:n})),s})}function t_(e){return new Promise(t=>{Ds(t,{injector:e})})}var Oa=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Lt,this.transitionAbortSubject=new Lt,this.configLoader=v(Ma),this.environmentInjector=v(on),this.urlSerializer=v(xi),this.rootContexts=v(Si),this.location=v(ni),this.inputBindingEnabled=v(lo,{optional:!0})!==null,this.titleStrategy=v(sh),this.options=v(Di,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=v(Na),this.createViewTransition=v(ch,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>_(void 0),this.rootComponentType=null;let i=o=>this.events.next(new da(o)),r=o=>this.events.next(new ua(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(U(b(b({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new At({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:fi,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xt(s=>s.id!==0),I(s=>U(b({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Q(s=>{let a=!1,c=!1;return _(s).pipe(Q(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",wt.SupersededByNewNavigation),ce;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?U(b({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!d&&u!=="reload"){let h="";return this.events.next(new ye(l.id,this.urlSerializer.serialize(l.rawUrl),h,Xr.IgnoredSameUrlNavigation)),l.resolve(null),ce}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return _(l).pipe(Q(h=>{let m=this.transitions?.getValue();return this.events.next(new yn(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),m!==this.transitions?.getValue()?ce:Promise.resolve(h)}),$b(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=U(b({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let m=new Jr(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:m,source:g,restoredState:y,extras:R}=l,$=new yn(h,this.urlSerializer.serialize(m),g,y);this.events.next($);let tt=Yu(this.rootComponentType).snapshot;return this.currentTransition=s=U(b({},l),{targetSnapshot:tt,urlAfterRedirects:m,extras:U(b({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,_(s)}else{let h="";return this.events.next(new ye(l.id,this.urlSerializer.serialize(l.extractedUrl),h,Xr.IgnoredByUrlHandlingStrategy)),l.resolve(null),ce}}),nt(l=>{let d=new sa(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),I(l=>(this.currentTransition=s=U(b({},l),{guards:cb(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),_b(this.environmentInjector,l=>this.events.next(l)),nt(l=>{if(s.guardsResult=l.guardsResult,vn(l.guardsResult))throw Ju(this.urlSerializer,l.guardsResult);let d=new aa(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),Xt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",wt.GuardRejected),!1)),ta(l=>{if(l.guards.canActivateChecks.length)return _(l).pipe(nt(d=>{let u=new ca(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}),Q(d=>{let u=!1;return _(d).pipe(Wb(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(d,"",wt.NoDataFromResolver)}}))}),nt(d=>{let u=new la(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}))}),ta(l=>{let d=u=>{let h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(nt(m=>{u.component=m}),I(()=>{})));for(let m of u.children)h.push(...d(m));return h};return en(d(l.targetSnapshot.root)).pipe(Es(null),le(1))}),ta(()=>this.afterPreactivation()),Q(()=>{let{currentSnapshot:l,targetSnapshot:d}=s,u=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return u?et(u).pipe(I(()=>s)):_(s)}),I(l=>{let d=tb(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=U(b({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),nt(()=>{this.events.next(new vi)}),ab(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),le(1),nt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ne(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),xr(this.transitionAbortSubject.pipe(nt(l=>{throw l}))),Er(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",wt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),nn(l=>{if(c=!0,eh(l))this.events.next(new ve(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),ib(l)?this.events.next(new yi(l.url)):s.resolve(!1);else{this.events.next(new _i(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(i.errorHandler(l))}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return ce}))}))}cancelNavigationTransition(i,r,o){let s=new ve(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(s),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function e_(e){return e!==fi}var n_=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:()=>v(i_),providedIn:"root"});let e=t;return e})(),Sa=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},i_=(()=>{let t=class t extends Sa{};t.\u0275fac=(()=>{let i;return function(o){return(i||(i=an(t)))(o||t)}})(),t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),dh=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:()=>v(r_),providedIn:"root"});let e=t;return e})(),r_=(()=>{let t=class t extends dh{constructor(){super(...arguments),this.location=v(ni),this.urlSerializer=v(xi),this.options=v(Di,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=v(Na),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new _e,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Yu(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof yn)this.stateMemento=this.createStateMemento();else if(i instanceof ye)this.rawUrlTree=r.initialUrl;else if(i instanceof Jr){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof vi?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof ve&&(i.code===wt.GuardRejected||i.code===wt.NoDataFromResolver)?this.restoreHistory(r):i instanceof _i?this.restoreHistory(r,!0):i instanceof ne&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=b(b({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=b(b({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===i.finalUrl&&s===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};t.\u0275fac=(()=>{let i;return function(o){return(i||(i=an(t)))(o||t)}})(),t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),hi=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(hi||{});function uh(e,t){e.events.pipe(Xt(n=>n instanceof ne||n instanceof ve||n instanceof _i||n instanceof ye),I(n=>n instanceof ne||n instanceof ye?hi.COMPLETE:(n instanceof ve?n.code===wt.Redirect||n.code===wt.SupersededByNewNavigation:!1)?hi.REDIRECTING:hi.FAILED),Xt(n=>n!==hi.REDIRECTING),le(1)).subscribe(()=>{t()})}function o_(e){throw e}var s_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},a_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ie=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=v(Mr),this.stateManager=v(dh),this.options=v(Di,{optional:!0})||{},this.pendingTasks=v(Od),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=v(Oa),this.urlSerializer=v(xi),this.location=v(ni),this.urlHandlingStrategy=v(Na),this._events=new Lt,this.errorHandler=this.options.errorHandler||o_,this.navigated=!1,this.routeReuseStrategy=v(n_),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=v(so,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!v(lo,{optional:!0}),this.eventsSubscription=new ud,this.isNgZoneEnabled=v(L)instanceof L&&L.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof ve&&r.code!==wt.Redirect&&r.code!==wt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ne)this.navigated=!0;else if(r instanceof yi){let a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||e_(o.source)};this.scheduleNavigation(a,fi,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}l_(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=b({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Ra),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,d=l?this.currentUrlTree.fragment:a,u=null;switch(c){case"merge":u=b(b({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let m=o?o.snapshot:this.routerState.snapshot.root;h=Wu(m)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),h=this.currentUrlTree.root}return Gu(h,i,u,d??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=vn(i)?i:this.parseUrl(i),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,fi,null,r)}navigate(i,r={skipLocationChange:!1}){return c_(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=b({},s_):r===!1?o=b({},a_):o=r,vn(i))return xu(this.currentUrlTree,i,o);let s=this.parseUrl(i);return xu(this.currentUrlTree,s,o)}removeEmptyProps(i){return Object.entries(i).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(i,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((h,m)=>{c=h,l=m});let u=this.pendingTasks.add();return uh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:s,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(h=>Promise.reject(h))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function c_(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new H(4008,!1)}function l_(e){return!(e instanceof vi)&&!(e instanceof yi)}var ao=class{};var d_=(()=>{let t=class t{constructor(i,r,o,s,a){this.router=i,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Xt(i=>i instanceof ne),rn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let o=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Rs(s.providers,i,`Route: ${s.path}`));let a=s._injector??i,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return et(o).pipe(ws())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(i,r):o=_(null);let s=o.pipe(bt(a=>a===null?_(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return et([s,a]).pipe(ws())}else return s})}};t.\u0275fac=function(r){return new(r||t)(p(ie),p(Fr),p(on),p(ao),p(Ma))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),hh=new T(""),u_=(()=>{let t=class t{constructor(i,r,o,s,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=v(on),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof yn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof ne?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof ye&&i.code===Xr.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof to&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>St(this,null,function*(){yield new Promise(o=>{setTimeout(()=>{o()}),Ds(()=>{o()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new to(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(r){ti()},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})();function h_(e){return e.routerState.root}function Ri(e,t){return{\u0275kind:e,\u0275providers:t}}function m_(){let e=v(Ar);return t=>{let n=e.get(Ls);if(t!==n.components[0])return;let i=e.get(ie),r=e.get(mh);e.get(Pa)===1&&i.initialNavigation(),e.get(fh,null,As.Optional)?.setUpPreloading(),e.get(hh,null,As.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var mh=new T("",{factory:()=>new Lt}),Pa=new T("",{providedIn:"root",factory:()=>1});function f_(){return Ri(2,[{provide:Pa,useValue:0},{provide:Fs,multi:!0,deps:[Ar],useFactory:t=>{let n=t.get(Wd,Promise.resolve());return()=>n.then(()=>new Promise(i=>{let r=t.get(ie),o=t.get(mh);uh(r,()=>{i(!0)}),t.get(Oa).afterPreactivation=()=>(i(!0),o.closed?_(void 0):o),r.initialNavigation()}))}}])}function p_(){return Ri(3,[{provide:Fs,multi:!0,useFactory:()=>{let t=v(ie);return()=>{t.setUpLocationChangeListener()}}},{provide:Pa,useValue:2}])}var fh=new T("");function g_(e){return Ri(0,[{provide:fh,useExisting:d_},{provide:ao,useExisting:e}])}function b_(){return Ri(8,[Du,{provide:lo,useExisting:Du}])}function __(e){let t=[{provide:ch,useValue:Jb},{provide:lh,useValue:b({skipNextTransition:!!e?.skipInitialTransition},e)}];return Ri(9,t)}var ku=new T("ROUTER_FORROOT_GUARD"),v_=[ni,{provide:xi,useClass:gi},ie,Si,{provide:wn,useFactory:h_,deps:[ie]},Ma,[]],ki=(()=>{let t=class t{constructor(i){}static forRoot(i,r){return{ngModule:t,providers:[v_,[],{provide:so,multi:!0,useValue:i},{provide:ku,useFactory:E_,deps:[[ie,new Yn,new Sd]]},{provide:Di,useValue:r||{}},r?.useHash?w_():C_(),y_(),r?.preloadingStrategy?g_(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?I_(r):[],r?.bindToComponentInputs?b_().\u0275providers:[],r?.enableViewTransitions?__().\u0275providers:[],x_()]}}static forChild(i){return{ngModule:t,providers:[{provide:so,multi:!0,useValue:i}]}}};t.\u0275fac=function(r){return new(r||t)(p(ku,8))},t.\u0275mod=M({type:t}),t.\u0275inj=k({});let e=t;return e})();function y_(){return{provide:hh,useFactory:()=>{let e=v(Jd),t=v(L),n=v(Di),i=v(Oa),r=v(xi);return n.scrollOffset&&e.setOffset(n.scrollOffset),new u_(r,i,e,t,n)}}}function w_(){return{provide:js,useClass:qd}}function C_(){return{provide:js,useClass:Gd}}function E_(e){return"guarded"}function I_(e){return[e.initialNavigation==="disabled"?p_().\u0275providers:[],e.initialNavigation==="enabledBlocking"?f_().\u0275providers:[]]}var Mu=new T("");function x_(){return[{provide:Mu,useFactory:m_},{provide:Vd,multi:!0,useExisting:Mu}]}var Ih=(()=>{let t=class t{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};t.\u0275fac=function(r){return new(r||t)(F(Rr),F(Tt))},t.\u0275dir=X({type:t});let e=t;return e})(),S_=(()=>{let t=class t extends Ih{};t.\u0275fac=(()=>{let i;return function(o){return(i||(i=an(t)))(o||t)}})(),t.\u0275dir=X({type:t,features:[Jt]});let e=t;return e})(),xh=new T("");var A_={provide:xh,useExisting:Kn(()=>_o),multi:!0};function T_(){let e=Ve()?Ve().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var D_=new T(""),_o=(()=>{let t=class t extends Ih{constructor(i,r,o){super(i,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!T_())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};t.\u0275fac=function(r){return new(r||t)(F(Rr),F(Tt),F(D_,8))},t.\u0275dir=X({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&Vt("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[Fe([A_]),Jt]});let e=t;return e})();function R_(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var La=new T(""),Sh=new T("");function k_(e){return R_(e.value)?{required:!0}:null}function gh(e){return null}function Ah(e){return e!=null}function Th(e){return Pr(e)?et(e):e}function Dh(e){let t={};return e.forEach(n=>{t=n!=null?b(b({},t),n):t}),Object.keys(t).length===0?null:t}function Rh(e,t){return t.map(n=>n(e))}function M_(e){return!e.validate}function kh(e){return e.map(t=>M_(t)?t:n=>t.validate(n))}function N_(e){if(!e)return null;let t=e.filter(Ah);return t.length==0?null:function(n){return Dh(Rh(n,t))}}function Va(e){return e!=null?N_(kh(e)):null}function O_(e){if(!e)return null;let t=e.filter(Ah);return t.length==0?null:function(n){let i=Rh(n,t).map(Th);return gd(i).pipe(I(Dh))}}function ja(e){return e!=null?O_(kh(e)):null}function bh(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function P_(e){return e._rawValidators}function F_(e){return e._rawAsyncValidators}function Fa(e){return e?Array.isArray(e)?e:[e]:[]}function mo(e,t){return Array.isArray(e)?e.includes(t):e===t}function _h(e,t){let n=Fa(t);return Fa(e).forEach(r=>{mo(n,r)||n.push(r)}),n}function vh(e,t){return Fa(t).filter(n=>!mo(e,n))}var fo=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Va(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=ja(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},xn=class extends fo{get formDirective(){return null}get path(){return null}},Pi=class extends fo{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},po=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},L_={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},fE=U(b({},L_),{"[class.ng-submitted]":"isSubmitted"}),Mh=(()=>{let t=class t extends po{constructor(i){super(i)}};t.\u0275fac=function(r){return new(r||t)(F(Pi,2))},t.\u0275dir=X({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&fe("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Jt]});let e=t;return e})(),Nh=(()=>{let t=class t extends po{constructor(i){super(i)}};t.\u0275fac=function(r){return new(r||t)(F(xn,10))},t.\u0275dir=X({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&fe("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Jt]});let e=t;return e})();var Mi="VALID",ho="INVALID",In="PENDING",Ni="DISABLED";function Oh(e){return(vo(e)?e.validators:e)||null}function V_(e){return Array.isArray(e)?Va(e):e||null}function Ph(e,t){return(vo(t)?t.asyncValidators:e)||null}function j_(e){return Array.isArray(e)?ja(e):e||null}function vo(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function U_(e,t,n){let i=e.controls;if(!(t?Object.keys(i):i).length)throw new H(1e3,"");if(!i[n])throw new H(1001,"")}function B_(e,t,n){e._forEachChild((i,r)=>{if(n[r]===void 0)throw new H(1002,"")})}var go=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Mi}get invalid(){return this.status===ho}get pending(){return this.status==In}get disabled(){return this.status===Ni}get enabled(){return this.status!==Ni}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(_h(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(_h(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(vh(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(vh(t,this._rawAsyncValidators))}hasValidator(t){return mo(this._rawValidators,t)}hasAsyncValidator(t){return mo(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=In,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Ni,this.errors=null,this._forEachChild(i=>{i.disable(U(b({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(U(b({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Mi,this._forEachChild(i=>{i.enable(U(b({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(U(b({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mi||this.status===In)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ni:Mi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=In,this._hasOwnPendingAsyncValidator=!0;let n=Th(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(t,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Dt,this.statusChanges=new Dt}_calculateStatus(){return this._allControlsDisabled()?Ni:this.errors?ho:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(In)?In:this._anyControlsHaveStatus(ho)?ho:Mi}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){vo(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=V_(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=j_(this._rawAsyncValidators)}},bo=class extends go{constructor(t,n,i){super(Oh(n),Ph(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,i={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){B_(this,!0,t),Object.keys(t).forEach(i=>{U_(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,i)=>(t[i]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&t(i,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(t,n){let i=t;return this._forEachChild((r,o)=>{i=n(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Ua=new T("CallSetDisabledState",{providedIn:"root",factory:()=>Ba}),Ba="always";function z_(e,t){return[...t.path,e]}function Fh(e,t,n=Ba){Lh(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),$_(e,t),G_(e,t),W_(e,t),H_(e,t)}function yh(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function H_(e,t){if(t.valueAccessor.setDisabledState){let n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function Lh(e,t){let n=P_(e);t.validator!==null?e.setValidators(bh(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let i=F_(e);t.asyncValidator!==null?e.setAsyncValidators(bh(i,t.asyncValidator)):typeof i=="function"&&e.setAsyncValidators([i]);let r=()=>e.updateValueAndValidity();yh(t._rawValidators,r),yh(t._rawAsyncValidators,r)}function $_(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&Vh(e,t)})}function W_(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&Vh(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function Vh(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function G_(e,t){let n=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function q_(e,t){e==null,Lh(e,t)}function K_(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function Y_(e){return Object.getPrototypeOf(e.constructor)===S_}function Q_(e,t){e._syncPendingControls(),t.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Z_(e,t){if(!t)return null;Array.isArray(t);let n,i,r;return t.forEach(o=>{o.constructor===_o?n=o:Y_(o)?i=o:r=o}),r||i||n||null}var X_={provide:xn,useExisting:Kn(()=>za)},Oi=Promise.resolve(),za=(()=>{let t=class t extends xn{constructor(i,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Dt,this.form=new bo({},Va(i),ja(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){Oi.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),Fh(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){Oi.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){Oi.then(()=>{let r=this._findContainer(i.path),o=new bo({});q_(o,i),r.registerControl(i.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){Oi.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){Oi.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,Q_(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};t.\u0275fac=function(r){return new(r||t)(F(La,10),F(Sh,10),F(Ua,8))},t.\u0275dir=X({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){r&1&&Vt("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[Ht.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Fe([X_]),Jt]});let e=t;return e})();function wh(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Ch(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var J_=class extends go{constructor(t=null,n,i){super(Oh(n),Ph(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vo(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Ch(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){wh(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){wh(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Ch(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var tv={provide:Pi,useExisting:Kn(()=>Ha)},Eh=Promise.resolve(),Ha=(()=>{let t=class t extends Pi{constructor(i,r,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new J_,this._registered=!1,this.name="",this.update=new Dt,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=Z_(this,s)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),K_(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Fh(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){Eh.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,o=r!==0&&un(r);Eh.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?z_(i,this._parent):[i]}};t.\u0275fac=function(r){return new(r||t)(F(xn,9),F(La,10),F(Sh,10),F(xh,10),F(dn,8),F(Ua,8))},t.\u0275dir=X({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Ht.None,"disabled","isDisabled"],model:[Ht.None,"ngModel","model"],options:[Ht.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Fe([tv]),Jt,sn]});let e=t;return e})(),jh=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=X({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let e=t;return e})();var ev=(()=>{let t=class t{constructor(){this._validator=gh}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):gh,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=X({type:t,features:[sn]});let e=t;return e})();var nv={provide:La,useExisting:Kn(()=>$a),multi:!0};var $a=(()=>{let t=class t extends ev{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=un,this.createValidator=i=>k_}enabled(i){return i}};t.\u0275fac=(()=>{let i;return function(o){return(i||(i=an(t)))(o||t)}})(),t.\u0275dir=X({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,o){r&2&&Oe("required",o._enabled?"":null)},inputs:{required:"required"},features:[Fe([nv]),Jt]});let e=t;return e})();var iv=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=M({type:t}),t.\u0275inj=k({});let e=t;return e})();var Uh=(()=>{let t=class t{static withConfig(i){return{ngModule:t,providers:[{provide:Ua,useValue:i.callSetDisabledState??Ba}]}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=M({type:t}),t.\u0275inj=k({imports:[iv]});let e=t;return e})();function sv(e,t){if(e&1&&(W(0,"div",15),K(1),V()),e&2){let n=cn();at(),ks(n.errorMessage)}}function av(e,t){e&1&&te(0,"div",16)}var Bh=(()=>{let t=class t{constructor(i){this.router=i,this.username="",this.password="",this.passwordVisible=!1,this.inputType="password",this.isLoading=!1,this.errorMessage=""}login(){this.username==="admin"&&this.password==="arc123"?this.router.navigate(["/user"]):this.errorMessage="Invalid username or password"}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible,this.inputType=this.passwordVisible?"text":"password"}};t.\u0275fac=function(r){return new(r||t)(F(ie))},t.\u0275cmp=_t({type:t,selectors:[["app-login"]],decls:21,vars:7,consts:[["passwordInput",""],[1,"container"],[1,"logo"],["src","assets/logo.png","alt","Logo"],["id","login"],["name","form-login",3,"ngSubmit"],[1,"input-group"],[1,"material-icons"],["name","username","type","text","id","user","placeholder","Username","required","",3,"ngModelChange","ngModel"],[1,"input-group","password-input"],["name","password","id","pass","placeholder","Password","required","",3,"ngModelChange","ngModel","type"],["type","button",3,"click"],["type","submit",3,"disabled"],["class","error",4,"ngIf"],["class","loading-icon",4,"ngIf"],[1,"error"],[1,"loading-icon"]],template:function(r,o){if(r&1){let s=kr();W(0,"div",1)(1,"div",2),te(2,"img",3),V(),W(3,"div",4)(4,"form",5),Vt("ngSubmit",function(){return he(s),me(o.login())}),W(5,"div",6)(6,"i",7),K(7,"person"),V(),W(8,"input",8),Os("ngModelChange",function(c){return he(s),Ns(o.username,c)||(o.username=c),me(c)}),V()(),W(9,"div",9)(10,"i",7),K(11,"lock"),V(),W(12,"input",10,0),Os("ngModelChange",function(c){return he(s),Ns(o.password,c)||(o.password=c),me(c)}),V(),W(14,"button",11),Vt("click",function(){return he(s),me(o.togglePasswordVisibility())}),W(15,"i",7),K(16),V()()(),W(17,"button",12),K(18,"Login"),V(),ei(19,sv,2,1,"div",13)(20,av,1,0,"div",14),V()()()}r&2&&(at(8),Ms("ngModel",o.username),at(4),Pd("type",o.inputType),Ms("ngModel",o.password),at(4),ks(o.passwordVisible?"visibility":"visibility_off"),at(),Pe("disabled",o.isLoading),at(2),Pe("ngIf",o.errorMessage),at(),Pe("ngIf",o.isLoading))},dependencies:[Qd,jh,_o,Mh,Nh,$a,Ha,za],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;overflow-x:hidden}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background-color:#292a2a}.logo[_ngcontent-%COMP%]{margin-bottom:20px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:170px}#login[_ngcontent-%COMP%]{max-width:400px;width:90%;background:#fff;border-radius:5px;box-shadow:0 0 10px #0000001a;padding:20px}#login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:20px}.input-group[_ngcontent-%COMP%]{margin-bottom:20px;position:relative}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 33px);border:1px solid #ddd;border-radius:3px;padding-left:41px;padding-top:10px;padding-bottom:10px}.input-group[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);left:10px;color:red}.password-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:0;position:absolute;top:50%;transform:translateY(-50%);left:323px}button[_ngcontent-%COMP%]{width:100%;background:red;border:none;color:#fff;padding:10px;cursor:pointer;border-radius:3px}button[_ngcontent-%COMP%]:hover{background:#8b0000}.loading-icon[_ngcontent-%COMP%]{width:24px;height:24px;border:3px solid red;border-radius:50%;border-top:3px solid transparent;border-bottom:3px solid transparent;animation:_ngcontent-ng-c2247809419_spin 1s linear infinite;position:relative;top:20px;left:163px}.error[_ngcontent-%COMP%]{text-align:center;padding-top:10px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media screen and (max-width: 767px){#login[_ngcontent-%COMP%]{width:70%}.password-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{left:191px}.loading-icon[_ngcontent-%COMP%]{left:96px}}"]});let e=t;return e})();var cv="firebase",lv="10.12.0";be(cv,lv,"app");var ze=new ln("ANGULARFIRE2_VERSION");var dv=(e,t)=>{let n=t?[t]:fu(),i=[];return n.forEach(r=>{r.container.getProvider(e).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},Be=class{constructor(){return dv(uv)}},uv="app-check";function Wa(){}var yo=class{zone;delegate;constructor(t,n=md){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,i){let r=this.zone,o=function(s){r.runGuarded(()=>{t.apply(this,[s])})};return this.delegate.schedule(o,n,i)}},Ga=class{zone;task=null;constructor(t){this.zone=t}call(t,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wa,{},Wa,Wa)),n.pipe(nt({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},wo=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new yo(Zone.current)),this.insideAngular=n.run(()=>new yo(Zone.current,wr)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||e)(p(L))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function hv(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function re(e){return mv(hv())(e)}function mv(e){return function(n){return n=n.lift(new Ga(e.ngZone)),n.pipe(tn(e.outsideAngular),Ne(e.insideAngular))}}var gv=new Map,bv={activated:!1,tokenObservers:[]},_v={initialized:!1,enabled:!1};function jt(e){return gv.get(e)||Object.assign({},bv)}function qh(){return _v}var vv="https://content-firebaseappcheck.googleapis.com/v1";var yv="exchangeDebugToken",Hh={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},OE=24*60*60*1e3;var Ka=class{constructor(t,n,i,r,o){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return St(this,null,function*(){this.stop();try{this.pending=new it,this.pending.promise.catch(n=>{}),yield wv(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new it,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function wv(e){return new Promise(t=>{setTimeout(t,e)})}var Cv={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ce=new su("appCheck","AppCheck",Cv);function Kh(e){if(!jt(e).activated)throw Ce.create("use-before-activation",{appName:e.name})}function Yh(i,r){return St(this,arguments,function*({url:e,body:t},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(t),headers:o},c;try{c=yield fetch(e,a)}catch(m){throw Ce.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw Ce.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(m){throw Ce.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Ce.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let u=Number(d[1])*1e3,h=Date.now();return{token:l.token,expireTimeMillis:h+u,issuedAtTimeMillis:h}})}function Qh(e,t){let{projectId:n,appId:i,apiKey:r}=e.options;return{url:`${vv}/projects/${n}/apps/${i}:${yv}?key=${r}`,body:{debug_token:t}}}var Ev="firebase-app-check-database",Iv=1,Ya="firebase-app-check-store";var Co=null;function xv(){return Co||(Co=new Promise((e,t)=>{try{let n=indexedDB.open(Ev,Iv);n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{var r;t(Ce.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Ya,{keyPath:"compositeKey"})}}}catch(n){t(Ce.create("storage-open",{originalErrorMessage:n?.message}))}}),Co)}function Sv(e,t){return Av(Tv(e),t)}function Av(e,t){return St(this,null,function*(){let i=(yield xv()).transaction(Ya,"readwrite"),o=i.objectStore(Ya).put({compositeKey:e,value:t});return new Promise((s,a)=>{o.onsuccess=c=>{s()},i.onerror=c=>{var l;a(Ce.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function Tv(e){return`${e.options.appId}-${e.name}`}var Qa=new mn("@firebase/app-check");function qa(e,t){return ou()?Sv(e,t).catch(n=>{Qa.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Zh(){return qh().enabled}function Xh(){return St(this,null,function*(){let e=qh();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Dv={error:"UNKNOWN_ERROR"};function Rv(e){return Vr.encodeString(JSON.stringify(e),!1)}function Za(e,t=!1){return St(this,null,function*(){let n=e.app;Kh(n);let i=jt(n),r=i.token,o;if(r&&!Fi(r)&&(i.token=void 0,r=void 0),!r){let c=yield i.cachedTokenPromise;c&&(Fi(c)?r=c:yield qa(n,void 0))}if(!t&&r&&Fi(r))return{token:r.token};let s=!1;if(Zh()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Yh(Qh(n,yield Xh()),e.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let c=yield i.exchangeTokenPromise;return yield qa(n,c),i.token=c,{token:c.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield jt(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Qa.warn(c.message):Qa.error(c),o=c}let a;return r?o?Fi(r)?a={token:r.token,internalError:o}:a=Wh(o):(a={token:r.token},i.token=r,yield qa(n,r)):a=Wh(o),s&&Ov(n,a),a})}function kv(e){return St(this,null,function*(){let t=e.app;Kh(t);let{provider:n}=jt(t);if(Zh()){let i=yield Xh(),{token:r}=yield Yh(Qh(t,i),e.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function Mv(e,t,n,i){let{app:r}=e,o=jt(r),s={next:n,error:i,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Fi(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),$h(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>$h(e))}function Jh(e,t){let n=jt(e),i=n.tokenObservers.filter(r=>r.next!==t);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function $h(e){let{app:t}=e,n=jt(t),i=n.tokenRefresher;i||(i=Nv(e),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function Nv(e){let{app:t}=e;return new Ka(()=>St(this,null,function*(){let n=jt(t),i;if(n.token?i=yield Za(e,!0):i=yield Za(e),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=jt(t);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},Hh.RETRIAL_MIN_WAIT,Hh.RETRIAL_MAX_WAIT)}function Ov(e,t){let n=jt(e).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&t.error!=null?i.error(t.error):i.next(t)}catch{}}function Fi(e){return e.expireTimeMillis-Date.now()>0}function Wh(e){return{token:Rv(Dv),error:e}}var Xa=class{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:t}=jt(this.app);for(let n of t)Jh(this.app,n.next);return Promise.resolve()}};function Pv(e,t){return new Xa(e,t)}function Fv(e){return{getToken:t=>Za(e,t),getLimitedUseToken:()=>kv(e),addTokenListener:t=>Mv(e,"INTERNAL",t),removeTokenListener:t=>Jh(e.app,t)}}var Lv="@firebase/app-check",Vv="0.8.4";var jv="app-check",Gh="app-check-internal";function Uv(){si(new ee(jv,e=>{let t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return Pv(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Gh).initialize()})),si(new ee(Gh,e=>{let t=e.getProvider("app-check").getImmediate();return Fv(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),be(Lv,Vv)}Uv();var Bv=["localhost","0.0.0.0","127.0.0.1"],GE=typeof window<"u"&&Bv.includes(window.location.hostname);var zv="firebase",Hv="10.12.0";ut.registerVersion(zv,Hv,"app-compat");var $v=["ngOnDestroy"],nm=(e,t,n,i={})=>new Proxy(e,{get:(r,o)=>n.runOutsideAngular(()=>{if(e[o])return i?.spy?.get&&i.spy.get(o,e[o]),e[o];if($v.indexOf(o)>-1)return()=>{};let s=t.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(d=>{let u=d?.(...l);return i?.spy?.apply&&i.spy.apply(o,l,u),u})})})});var Eo=class{constructor(t){return t}},Sn=new T("angularfire2.app.options"),An=new T("angularfire2.app.name");function Li(e,t,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let s=ut.apps.filter(a=>a&&a.name===r.name)[0]||t.runOutsideAngular(()=>ut.initializeApp(e,r));try{if(JSON.stringify(e)!==JSON.stringify(s.options)){let a=!!module.hot;Wv("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Eo(s)}var Wv=(e,...t)=>{Vs()&&typeof console<"u"&&console[e](...t)},Gv={provide:Eo,useFactory:Li,deps:[Sn,L,[new Yn,An]]},im=(()=>{class e{static initializeApp(n,i){return{ngModule:e,providers:[{provide:Sn,useValue:n},{provide:An,useValue:i}]}}constructor(n){ut.registerVersion("angularfire",ze.full,"core"),ut.registerVersion("angularfire",ze.full,"app-compat"),ut.registerVersion("angular",Fd.full,n.toString())}static \u0275fac=function(i){return new(i||e)(p(vt))};static \u0275mod=M({type:e});static \u0275inj=k({providers:[Gv]})}return e})();function Io(e,t,n,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===e)||[];if(o)return qv(r,s)||(em("error",`${t} was already initialized on the ${n} Firebase App with different settings.${Kv?" You may need to reload as Firebase is not HMR aware.":""}`),em("warn",{is:r,was:s})),o;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([e,a,r]),a}}function qv(e,t){try{return e.toString()===t.toString()}catch{return e===t}}var Kv=typeof module<"u"&&!!module.hot,em=(e,...t)=>{Vs()&&typeof console<"u"&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var Ja=new T("angularfire2.auth.use-emulator"),tc=new T("angularfire2.auth.settings"),ec=new T("angularfire2.auth.tenant-id"),nc=new T("angularfire2.auth.langugage-code"),ic=new T("angularfire2.auth.use-device-language"),rc=new T("angularfire.auth.persistence"),oc=(e,t,n,i,r,o,s,a)=>Io(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let c=t.runOutsideAngular(()=>e.auth());if(n&&c.useEmulator(...n),i&&(c.tenantId=i),c.languageCode=r,o&&c.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))c.settings[l]=d;return a&&c.setPersistence(a),c},[n,i,r,o,s,a]),Vi=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,s,a,c,l,d,u,h,m){let g=new Lt,y=_(void 0).pipe(Ne(s.outsideAngular),Q(()=>o.runOutsideAngular(()=>import("./chunk-32VMCR27.js"))),I(()=>Li(n,o,i)),I(R=>oc(R,o,a,l,d,u,c,h)),xs({bufferSize:1,refCount:!1}));if(ii(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=_(null);else{y.pipe(zt()).subscribe();let R=y.pipe(Q(z=>z.getRedirectResult().then(Ft=>Ft,()=>null)),re,xs({bufferSize:1,refCount:!1})),$=y.pipe(Q(z=>new ae(Ft=>({unsubscribe:o.runOutsideAngular(()=>z.onAuthStateChanged(Me=>Ft.next(Me),Me=>Ft.error(Me),()=>Ft.complete()))})))),tt=y.pipe(Q(z=>new ae(Ft=>({unsubscribe:o.runOutsideAngular(()=>z.onIdTokenChanged(Me=>Ft.next(Me),Me=>Ft.error(Me),()=>Ft.complete()))}))));this.authState=R.pipe(Ss($),tn(s.outsideAngular),Ne(s.insideAngular)),this.user=R.pipe(Ss(tt),tn(s.outsideAngular),Ne(s.insideAngular)),this.idToken=this.user.pipe(Q(z=>z?et(z.getIdToken()):_(null))),this.idTokenResult=this.user.pipe(Q(z=>z?et(z.getIdTokenResult()):_(null))),this.credential=Gn(R,g,this.authState.pipe(Xt(z=>!z))).pipe(I(z=>z?.user?z:null),tn(s.outsideAngular),Ne(s.insideAngular))}return nm(this,y,o,{spy:{apply:(R,$,tt)=>{(R.startsWith("signIn")||R.startsWith("createUser"))&&tt.then(z=>g.next(z))}}})}static \u0275fac=function(i){return new(i||e)(p(Sn),p(An,8),p(vt),p(L),p(wo),p(Ja,8),p(tc,8),p(ec,8),p(nc,8),p(ic,8),p(rc,8),p(Be,8))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})(),rm=(()=>{class e{constructor(){ut.registerVersion("angularfire",ze.full,"auth-compat")}static \u0275fac=function(i){return new(i||e)};static \u0275mod=M({type:e});static \u0275inj=k({providers:[Vi]})}return e})();var sm="@firebase/database",am="1.0.5";var bl="";function _l(e){bl=e}var mc=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Z(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:jr(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var fc=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Rt(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var Vm=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new mc(t)}}catch{}return new fc},$e=Vm("localStorage"),pc=Vm("sessionStorage");var kn=new mn("@firebase/database"),jm=function(){let e=1;return function(){return e++}}(),Um=function(e){let t=uu(e),n=new du;n.update(t);let i=n.digest();return Vr.encodeByteArray(i)},cr=function(...e){let t="";for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=cr.apply(null,i):typeof i=="object"?t+=Z(i):t+=i,t+=" "}return t},We=null,cm=!0,Bm=function(e,t){f(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(kn.logLevel=hu.VERBOSE,We=kn.log.bind(kn),t&&pc.set("logging_enabled",!0)):typeof e=="function"?We=e:(We=null,pc.remove("logging_enabled"))},ot=function(...e){if(cm===!0&&(cm=!1,We===null&&pc.get("logging_enabled")===!0&&Bm(!0)),We){let t=cr.apply(null,e);We(t)}},lr=function(e){return function(...t){ot(e,...t)}},gc=function(...e){let t="FIREBASE INTERNAL ERROR: "+cr(...e);kn.error(t)},Yt=function(...e){let t=`FIREBASE FATAL ERROR: ${cr(...e)}`;throw kn.error(t),new Error(t)},lt=function(...e){let t="FIREBASE WARNING: "+cr(...e);kn.warn(t)},Yv=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&lt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Xo=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Qv=function(e){if($t()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Se="[MIN_NAME]",oe="[MAX_NAME]",qe=function(e,t){if(e===t)return 0;if(e===Se||t===oe)return-1;if(t===Se||e===oe)return 1;{let n=lm(e),i=lm(t);return n!==null?i!==null?n-i===0?e.length-t.length:n-i:-1:i!==null?1:e<t?-1:1}},Zv=function(e,t){return e===t?0:e<t?-1:1},ji=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Z(t))},vl=function(e){if(typeof e!="object"||e===null)return Z(e);let t=[];for(let i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)i!==0&&(n+=","),n+=Z(t[i]),n+=":",n+=vl(e[t[i]]);return n+="}",n},zm=function(e,t){let n=e.length;if(n<=t)return[e];let i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function st(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Hm=function(e){f(!Xo(e),"Invalid JSON number");let t=11,n=52,i=(1<<t-1)-1,r,o,s,a,c;e===0?(o=0,s=0,r=1/e===-1/0?1:0):(r=e<0,e=Math.abs(e),e>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),i),o=a+i,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(e/Math.pow(2,1-i-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(r?1:0),l.reverse();let d=l.join(""),u="";for(c=0;c<64;c+=8){let h=parseInt(d.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),u=u+h}return u.toLowerCase()},Xv=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Jv=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function ty(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let i=new Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}var ey=new RegExp("^-?(0*)\\d{1,10}$"),ny=-2147483648,iy=2147483647,lm=function(e){if(ey.test(e)){let t=Number(e);if(t>=ny&&t<=iy)return t}return null},Un=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw lt("Exception was thrown by user callback.",n),t},Math.floor(0))}},ry=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Hi=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var bc=class{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){lt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var _c=class{constructor(t,n,i){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(ot("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',lt(t)}},$i=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),So="5",$m="v",Wm="s",Gm="r",qm="f",Km=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ym="ls",Qm="p",vc="ac",Zm="websocket",Xm="long_polling";var Ao=class{constructor(t,n,i,r,o=!1,s="",a=!1,c=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$e.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&$e.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function oy(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function Jm(e,t,n){f(typeof t=="string","typeof type must == string"),f(typeof n=="object","typeof params must == object");let i;if(t===Zm)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===Xm)i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);oy(e)&&(n.ns=e.namespace);let r=[];return st(n,(o,s)=>{r.push(o+"="+s)}),i+r.join("&")}var yc=class{constructor(){this.counters_={}}incrementCounter(t,n=1){Rt(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return nu(this.counters_)}};var sc={},ac={};function yl(e){let t=e.toString();return sc[t]||(sc[t]=new yc),sc[t]}function sy(e,t){let n=e.toString();return ac[n]||(ac[n]=t()),ac[n]}var wc=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Un(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var dm="start",ay="close",cy="pLPCommand",ly="pRTLPCB",tf="id",ef="pw",nf="ser",dy="cb",uy="seg",hy="ts",my="d",fy="dframe",rf=1870,of=30,py=rf-of,gy=25e3,by=3e4,Ki=class e{constructor(t,n,i,r,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=lr(t),this.stats_=yl(n),this.urlFn=c=>(this.appCheckToken&&(c[vc]=this.appCheckToken),Jm(n,Xm,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new wc(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(by)),Qv(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Cc((...o)=>{let[s,a,c,l,d]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===dm)this.id=a,this.password=c;else if(s===ay)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[dm]="t",i[nf]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[dy]=this.scriptTagHolder.uniqueCallbackIdentifier),i[$m]=So,this.transportSessionId&&(i[Wm]=this.transportSessionId),this.lastSessionId&&(i[Ym]=this.lastSessionId),this.applicationId&&(i[Qm]=this.applicationId),this.appCheckToken&&(i[vc]=this.appCheckToken),typeof location<"u"&&location.hostname&&Km.test(location.hostname)&&(i[Gm]=qm);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return $t()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Xv()&&!Jv()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=Z(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let i=eu(n),r=zm(i,py);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if($t())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[fy]="t",i[tf]=t,i[ef]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=Z(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Cc=class e{constructor(t,n,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,$t())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=jm(),window[cy+this.uniqueCallbackIdentifier]=t,window[ly+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){ot("frame writing exception"),a.stack&&ot(a.stack),ot(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||ot("No IE domain setting required")}catch{let i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[tf]=this.myID,t[ef]=this.myPW,t[nf]=this.currentSerial;let n=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+of+i.length<=rf;){let s=this.pendingSegs.shift();i=i+"&"+uy+r+"="+s.seg+"&"+hy+r+"="+s.ts+"&"+my+r+"="+s.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,i){this.pendingSegs.push({seg:t,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(gy)),o=()=>{clearTimeout(r),i()};this.addTag(t,o)}addTag(t,n){$t()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{ot("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var _y=16384,vy=45e3,To=null;typeof MozWebSocket<"u"?To=MozWebSocket:typeof WebSocket<"u"&&(To=WebSocket);var Dn=(()=>{class e{constructor(n,i,r,o,s,a,c){this.connId=n,this.applicationId=r,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=lr(this.connId),this.stats_=yl(i),this.connURL=e.connectionURL_(i,a,c,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(n,i,r,o,s){let a={};return a[$m]=So,!$t()&&typeof location<"u"&&location.hostname&&Km.test(location.hostname)&&(a[Gm]=qm),i&&(a[Wm]=i),r&&(a[Ym]=r),o&&(a[vc]=o),s&&(a[Qm]=s),Jm(n,Zm,a)}open(n,i){this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$e.set("previous_websocket_failure",!0);try{let r;if($t()){let o=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${So}/${bl}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new To(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(n=!0)}return!n&&To!==null&&!e.forceDisallow_}static previouslyFailed(){return $e.isInMemoryStorage||$e.get("previous_websocket_failure")===!0}markConnectionHealthy(){$e.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=jr(i);this.onMessage(r)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(f(this.frames===null,"We already have a frame buffer"),n.length<=6){let i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(n){this.resetKeepAlive();let i=Z(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=zm(i,_y);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(vy))}sendString_(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),sf=(()=>{class e{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Ki,Dn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let i=Dn&&Dn.isAvailable(),r=i&&!Dn.previouslyFailed();if(n.webSocketOnly&&(i||lt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Dn];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),yy=6e4,wy=5e3,Cy=10*1024,Ey=100*1024,cc="t",um="d",Iy="s",hm="r",xy="e",mm="o",fm="a",pm="n",gm="p",Sy="h",Ec=class{constructor(t,n,i,r,o,s,a,c,l,d){this.id=t,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=lr("c:"+this.id+":"),this.transportManager_=new sf(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));let r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=Hi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Ey?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Cy?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(cc in t){let n=t[cc];n===fm?this.upgradeIfSecondaryHealthy_():n===hm?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===mm&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=ji("t",t),i=ji("d",t);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:gm,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:fm,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:pm,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=ji("t",t),i=ji("d",t);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=ji(cc,t);if(um in t){let i=t[um];if(n===Sy){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===pm){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Iy?this.onConnectionShutdown_(i):n===hm?this.onReset_(i):n===xy?gc("Server Error: "+i):n===mm?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):gc("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),So!==i&&lt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Hi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(yy))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Hi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(wy))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:gm,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($e.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Do=class{put(t,n,i,r){}merge(t,n,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,i){}onDisconnectMerge(t,n,i){}onDisconnectCancel(t,n){}reportStats(t){}};var Ro=class{constructor(t){this.allowedEvents_=t,this.listeners_={},f(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(t,n,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:i});let r=this.getInitialEvent(t);r&&n.apply(i,r)}off(t,n,i){this.validateEventType_(t);let r=this.listeners_[t]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(t){f(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var ko=class e extends Ro{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Us()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(t){return f(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var bm=32,_m=768,O=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function N(){return new O("")}function S(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Ae(e){return e.pieces_.length-e.pieceNum_}function j(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new O(e.pieces_,t)}function wl(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Ay(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function Yi(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function af(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new O(t,0)}function G(e,t){let n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof O)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{let i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new O(n,0)}function A(e){return e.pieceNum_>=e.pieces_.length}function ht(e,t){let n=S(e),i=S(t);if(n===null)return t;if(n===i)return ht(j(e),j(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ty(e,t){let n=Yi(e,0),i=Yi(t,0);for(let r=0;r<n.length&&r<i.length;r++){let o=qe(n[r],i[r]);if(o!==0)return o}return n.length===i.length?0:n.length<i.length?-1:1}function Cl(e,t){if(Ae(e)!==Ae(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Mt(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(Ae(e)>Ae(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}var Ic=class{constructor(t,n){this.errorPrefix_=n,this.parts_=Yi(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=oi(this.parts_[i]);cf(this)}};function Dy(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=oi(t),cf(e)}function Ry(e){let t=e.parts_.pop();e.byteLength_-=oi(t),e.parts_.length>0&&(e.byteLength_-=1)}function cf(e){if(e.byteLength_>_m)throw new Error(e.errorPrefix_+"has a key path longer than "+_m+" bytes ("+e.byteLength_+").");if(e.parts_.length>bm)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+bm+") or object contains a cycle "+He(e))}function He(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var xc=class e extends Ro{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new e}getInitialEvent(t){return f(t==="visible","Unknown event type: "+t),[this.visible_]}};var Ui=1e3,ky=60*5*1e3,vm=30*1e3,My=1.3,Ny=3e4,Oy="server_kill",ym=3,El=(()=>{class e extends Do{constructor(n,i,r,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=lr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ui,this.maxReconnectDelay_=ky,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!$t())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");xc.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&ko.getInstance().on("online",this.onOnline_,this)}sendRequest(n,i,r){let o=++this.requestNumber_,s={r:o,a:n,b:i};this.log_(Z(s)),f(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[o]=r)}get(n){this.initConnection_();let i=new it,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?i.resolve(c):i.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),i.promise}listen(n,i,r,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),f(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),f(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:i,query:n,tag:r};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let i=this.outstandingGets_[n];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(n){let i=n.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);let s={p:r},a="q";n.tag&&(s.q=i._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,d=c.s;e.warnOnListenWarnings_(l,i),(this.listens.get(r)&&this.listens.get(r).get(o))===n&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(r,o),n.onComplete&&n.onComplete(d,l))})}static warnOnListenWarnings_(n,i){if(n&&typeof n=="object"&&Rt(n,"w")){let r=ge(n,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',s=i._path.toString();lt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||cu(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=vm)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,i=au(n)?"auth":"gauth",r={cred:n};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let i=n.s,r=n.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(n,i){let r=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),f(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,n._queryObject,i)}sendUnlisten_(n,i,r,o){this.log_("Unlisten on "+n+" for "+i);let s={p:n},a="n";o&&(s.q=r,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:i,onComplete:r})}onDisconnectMerge(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:i,onComplete:r})}onDisconnectCancel(n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(n,i,r,o){let s={p:i,d:r};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,i,r,o){this.putInternal("p",n,i,r,o)}merge(n,i,r,o){this.putInternal("m",n,i,r,o)}putInternal(n,i,r,o,s){this.initConnection_();let a={p:i,d:r};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+i)}sendPut_(n){let i=this.outstandingPuts_[n].action,r=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,r,s=>{this.log_(i+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Z(n));let i=n.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,i){this.log_("handleServerMessage",n,i),n==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):n==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):n==="c"?this.onListenRevoked_(i.p,i.q):n==="ac"?this.onAuthRevoked_(i.s,i.d):n==="apc"?this.onAppCheckRevoked_(i.s,i.d):n==="sd"?this.onSecurityDebugPacket_(i):gc("Unrecognized action received from server: "+Z(n)+`
Are you using the latest client?`)}onReady_(n,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){f(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ui,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ui,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Ny&&(this.reconnectDelay_=Ui),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-n);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*My)}this.onConnectStatus_(!1)}establishConnection_(){return St(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,r())},d=function(h){f(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:d};let u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,m]=yield Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);a?ot("getToken() completed but was canceled"):(ot("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=m&&m.token,c=new Ec(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,i,r,g=>{lt(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(Oy)},s))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&lt(h),l())}}})}interrupt(n){ot("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){ot("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ur(this.interruptReasons_)&&(this.reconnectDelay_=Ui,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let i=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let i=this.outstandingPuts_[n];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,i){let r;i?r=i.map(s=>vl(s)).join("$"):r="default";let o=this.removeListen_(n,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,i){let r=new O(n).toString(),o;if(this.listens.has(r)){let s=this.listens.get(r);o=s.get(i),s.delete(i),s.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(n,i){ot("Auth token revoked: "+n+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ym&&(this.reconnectDelay_=vm,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,i){ot("App check token revoked: "+n+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ym&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let i of n.values())this.sendListen_(i);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},i="js";$t()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),n["sdk."+i+"."+bl.replace(/\./g,"-")]=1,Us()?n["framework.cordova"]=1:ru()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=ko.getInstance().currentlyOnline();return Ur(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),D=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var Mn=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let i=new D(Se,t),r=new D(Se,n);return this.compare(i,r)!==0}minPost(){return D.MIN}};var xo,Mo=class extends Mn{static get __EMPTY_NODE(){return xo}static set __EMPTY_NODE(t){xo=t}compare(t,n){return qe(t.name,n.name)}isDefinedOn(t){throw hn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return D.MIN}maxPost(){return new D(oe,xo)}makePost(t,n){return f(typeof t=="string","KeyIndex indexValue must always be a string."),new D(t,xo)}toString(){return".key"}},Kt=new Mo;var Rn=class{constructor(t,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=n?i(t.key,n):1,r&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Ut=(()=>{class e{constructor(n,i,r,o,s){this.key=n,this.value=i,this.color=r??e.RED,this.left=o??Nt.EMPTY_NODE,this.right=s??Nt.EMPTY_NODE}copy(n,i,r,o,s){return new e(n??this.key,i??this.value,r??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,r){let o=this,s=r(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,i,r),null):s===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Nt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,i){let r,o;if(r=this,i(n,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(n,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(n,r.key)===0){if(r.right.isEmpty())return Nt.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(n,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),Sc=class{copy(t,n,i,r,o){return this}insert(t,n,i){return new Ut(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Nt=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Ut.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ut.BLACK,null,null))}get(t){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(t,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(t){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(t,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Rn(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Rn(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Rn(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Rn(this.root_,null,this.comparator_,!0,t)}};Nt.EMPTY_NODE=new Sc;function Py(e,t){return qe(e.name,t.name)}function Il(e,t){return qe(e,t)}var Ac;function Fy(e){Ac=e}var lf=function(e){return typeof e=="number"?"number:"+Hm(e):"string:"+e},df=function(e){if(e.isLeafNode()){let t=e.val();f(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Rt(t,".sv"),"Priority must be a string or number.")}else f(e===Ac||e.isEmpty(),"priority of unexpected type.");f(e===Ac||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var wm,Nn=(()=>{class e{constructor(n,i=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=i,this.lazyHash_=null,f(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),df(this.priorityNode_)}static set __childrenNodeConstructor(n){wm=n}static get __childrenNodeConstructor(){return wm}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return A(n)?this:S(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,i){return null}updateImmediateChild(n,i){return n===".priority"?this.updatePriority(i):i.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)}updateChild(n,i){let r=S(n);return r===null?i:i.isEmpty()&&r!==".priority"?this:(f(r!==".priority"||Ae(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(j(n),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,i){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+lf(this.priorityNode_.val())+":");let i=typeof this.value_;n+=i+":",i==="number"?n+=Hm(this.value_):n+=this.value_,this.lazyHash_=Um(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(f(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let i=typeof n.value_,r=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(i),s=e.VALUE_TYPE_ORDER.indexOf(r);return f(o>=0,"Unknown leaf type: "+i),f(s>=0,"Unknown leaf type: "+r),o===s?r==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let i=n;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),uf,hf;function Ly(e){uf=e}function Vy(e){hf=e}var Tc=class extends Mn{compare(t,n){let i=t.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?qe(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return D.MIN}maxPost(){return new D(oe,new Nn("[PRIORITY-POST]",hf))}makePost(t,n){let i=uf(t);return new D(n,new Nn("[PRIORITY-POST]",i))}toString(){return".priority"}},B=new Tc;var jy=Math.log(2),Dc=class{constructor(t){let n=o=>parseInt(Math.log(o)/jy,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let r=i(this.count);this.bits_=t+1&r}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},No=function(e,t,n,i){e.sort(t);let r=function(c,l){let d=l-c,u,h;if(d===0)return null;if(d===1)return u=e[c],h=n?n(u):u,new Ut(h,u.node,Ut.BLACK,null,null);{let m=parseInt(d/2,10)+c,g=r(c,m),y=r(m+1,l);return u=e[m],h=n?n(u):u,new Ut(h,u.node,Ut.BLACK,g,y)}},o=function(c){let l=null,d=null,u=e.length,h=function(g,y){let R=u-g,$=u;u-=g;let tt=r(R+1,$),z=e[R],Ft=n?n(z):z;m(new Ut(Ft,z.node,y,null,tt))},m=function(g){l?(l.left=g,l=g):(d=g,l=g)};for(let g=0;g<c.count;++g){let y=c.nextBitIsOne(),R=Math.pow(2,c.count-(g+1));y?h(R,Ut.BLACK):(h(R,Ut.BLACK),h(R,Ut.RED))}return d},s=new Dc(e.length),a=o(s);return new Nt(i||t,a)};var lc,Tn={},On=class e{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return f(Tn&&B,"ChildrenNode.ts has not been loaded"),lc=lc||new e({".priority":Tn},{".priority":B}),lc}get(t){let n=ge(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Nt?n:null}hasIndex(t){return Rt(this.indexSet_,t.toString())}addIndex(t,n){f(t!==Kt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,o=n.getIterator(D.Wrap),s=o.getNext();for(;s;)r=r||t.isDefinedOn(s.node),i.push(s),s=o.getNext();let a;r?a=No(i,t.getCompare()):a=Tn;let c=t.toString(),l=Object.assign({},this.indexSet_);l[c]=t;let d=Object.assign({},this.indexes_);return d[c]=a,new e(d,l)}addToIndexes(t,n){let i=ri(this.indexes_,(r,o)=>{let s=ge(this.indexSet_,o);if(f(s,"Missing index implementation for "+o),r===Tn)if(s.isDefinedOn(t.node)){let a=[],c=n.getIterator(D.Wrap),l=c.getNext();for(;l;)l.name!==t.name&&a.push(l),l=c.getNext();return a.push(t),No(a,s.getCompare())}else return Tn;else{let a=n.get(t.name),c=r;return a&&(c=c.remove(new D(t.name,a))),c.insert(t,t.node)}});return new e(i,this.indexSet_)}removeFromIndexes(t,n){let i=ri(this.indexes_,r=>{if(r===Tn)return r;{let o=n.get(t.name);return o?r.remove(new D(t.name,o)):r}});return new e(i,this.indexSet_)}};var Bi,E=(()=>{class e{constructor(n,i,r){this.children_=n,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&df(this.priorityNode_),this.children_.isEmpty()&&f(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Bi||(Bi=new e(new Nt(Il),null,On.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Bi}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let i=this.children_.get(n);return i===null?Bi:i}}getChild(n){let i=S(n);return i===null?this:this.getImmediateChild(i).getChild(j(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,i){if(f(i,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(i);{let r=new D(n,i),o,s;i.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(n,i),s=this.indexMap_.addToIndexes(r,this.children_));let a=o.isEmpty()?Bi:this.priorityNode_;return new e(o,a,s)}}updateChild(n,i){let r=S(n);if(r===null)return i;{f(S(n)!==".priority"||Ae(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(r).updateChild(j(n),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let i={},r=0,o=0,s=!0;if(this.forEachChild(B,(a,c)=>{i[a]=c.val(n),r++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*r){let a=[];for(let c in i)a[c]=i[c];return a}else return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+lf(this.getPriority().val())+":"),this.forEachChild(B,(i,r)=>{let o=r.hash();o!==""&&(n+=":"+i+":"+o)}),this.lazyHash_=n===""?"":Um(n)}return this.lazyHash_}getPredecessorChildName(n,i,r){let o=this.resolveIndex_(r);if(o){let s=o.getPredecessorKey(new D(n,i));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(n){let i=this.getFirstChildName(n);return i?new D(i,this.children_.get(i)):null}getLastChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(n){let i=this.getLastChildName(n);return i?new D(i,this.children_.get(i)):null}forEachChild(n,i){let r=this.resolveIndex_(n);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,D.Wrap),s=o.peek();for(;s!=null&&i.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,D.Wrap),s=o.peek();for(;s!=null&&i.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===dr?-1:0}withIndex(n){if(n===Kt||this.indexMap_.hasIndex(n))return this;{let i=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,i)}}isIndexed(n){return n===Kt||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let i=n;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(B),o=i.getIterator(B),s=r.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Kt?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),Rc=class extends E{constructor(){super(new Nt(Il),E.EMPTY_NODE,On.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return E.EMPTY_NODE}isEmpty(){return!1}},dr=new Rc;Object.defineProperties(D,{MIN:{value:new D(Se,E.EMPTY_NODE)},MAX:{value:new D(oe,dr)}});Mo.__EMPTY_NODE=E.EMPTY_NODE;Nn.__childrenNodeConstructor=E;Fy(dr);Vy(dr);var Uy=!0;function q(e,t=null){if(e===null)return E.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),f(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new Nn(n,q(t))}if(!(e instanceof Array)&&Uy){let n=[],i=!1;if(st(e,(s,a)=>{if(s.substring(0,1)!=="."){let c=q(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),n.push(new D(s,c)))}}),n.length===0)return E.EMPTY_NODE;let o=No(n,Py,s=>s.name,Il);if(i){let s=No(n,B.getCompare());return new E(o,q(t),new On({".priority":s},{".priority":B}))}else return new E(o,q(t),On.Default)}else{let n=E.EMPTY_NODE;return st(e,(i,r)=>{if(Rt(e,i)&&i.substring(0,1)!=="."){let o=q(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(q(t))}}Ly(q);var Qi=class extends Mn{constructor(t){super(),this.indexPath_=t,f(!A(t)&&S(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let i=this.extractChild(t.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?qe(t.name,n.name):o}makePost(t,n){let i=q(t),r=E.EMPTY_NODE.updateChild(this.indexPath_,i);return new D(n,r)}maxPost(){let t=E.EMPTY_NODE.updateChild(this.indexPath_,dr);return new D(oe,t)}toString(){return Yi(this.indexPath_,0).join("/")}};var kc=class extends Mn{compare(t,n){let i=t.node.compareTo(n.node);return i===0?qe(t.name,n.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return D.MIN}maxPost(){return D.MAX}makePost(t,n){let i=q(t);return new D(n,i)}toString(){return".value"}},xl=new kc;function mf(e){return{type:"value",snapshotNode:e}}function Pn(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Zi(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Xi(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function By(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var Ji=class{constructor(t){this.index_=t}updateChild(t,n,i,r,o,s){f(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(n);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(s!=null&&(i.isEmpty()?t.hasChild(n)?s.trackChildChange(Zi(n,a)):f(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Pn(n,i)):s.trackChildChange(Xi(n,i,a))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(t,n,i){return i!=null&&(t.isLeafNode()||t.forEachChild(B,(r,o)=>{n.hasChild(r)||i.trackChildChange(Zi(r,o))}),n.isLeafNode()||n.forEachChild(B,(r,o)=>{if(t.hasChild(r)){let s=t.getImmediateChild(r);s.equals(o)||i.trackChildChange(Xi(r,o,s))}else i.trackChildChange(Pn(r,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?E.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Oo=class e{constructor(t){this.indexedFilter_=new Ji(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&i}updateChild(t,n,i,r,o,s){return this.matches(new D(n,i))||(i=E.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,i,r,o,s)}updateFullNode(t,n,i){n.isLeafNode()&&(n=E.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(E.EMPTY_NODE);let o=this;return n.forEachChild(B,(s,a)=>{o.matches(new D(s,a))||(r=r.updateImmediateChild(s,E.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var Mc=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{let i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Oo(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,i,r,o,s){return this.rangedFilter_.matches(new D(n,i))||(i=E.EMPTY_NODE),t.getImmediateChild(n).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,i,r,o,s):this.fullLimitUpdateChild_(t,n,i,o,s)}updateFullNode(t,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=E.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=E.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(E.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:r=r.updateImmediateChild(a.name,E.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,i,r,o){let s;if(this.reverse_){let u=this.index_.getCompare();s=(h,m)=>u(m,h)}else s=this.index_.getCompare();let a=t;f(a.numChildren()===this.limit_,"");let c=new D(n,i),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(a.hasChild(n)){let u=a.getImmediateChild(n),h=r.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);let m=h==null?1:s(h,c);if(d&&!i.isEmpty()&&m>=0)return o?.trackChildChange(Xi(n,i,u)),a.updateImmediateChild(n,i);{o?.trackChildChange(Zi(n,u));let y=a.updateImmediateChild(n,E.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(o?.trackChildChange(Pn(h.name,h.node)),y.updateImmediateChild(h.name,h.node)):y}}else return i.isEmpty()?t:d&&s(l,c)>=0?(o!=null&&(o.trackChildChange(Zi(l.name,l.node)),o.trackChildChange(Pn(n,i))),a.updateImmediateChild(n,i).updateImmediateChild(l.name,E.EMPTY_NODE)):t}};var tr=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=B}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return f(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return f(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Se}hasEnd(){return this.endSet_}getIndexEndValue(){return f(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return f(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:oe}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return f(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===B}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function zy(e){return e.loadsAllData()?new Ji(e.getIndex()):e.hasLimit()?new Mc(e):new Oo(e)}function Hy(e,t){let n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}function $y(e,t){let n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}function Nc(e,t,n){let i=e.copy();return i.startSet_=!0,t===void 0&&(t=null),i.indexStartValue_=t,n!=null?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function Wy(e,t,n){let i;return e.index_===Kt||n?i=Nc(e,t,n):i=Nc(e,t,oe),i.startAfterSet_=!0,i}function Oc(e,t,n){let i=e.copy();return i.endSet_=!0,t===void 0&&(t=null),i.indexEndValue_=t,n!==void 0?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function Gy(e,t,n){let i;return e.index_===Kt||n?i=Oc(e,t,n):i=Oc(e,t,Se),i.endBeforeSet_=!0,i}function Jo(e,t){let n=e.copy();return n.index_=t,n}function Cm(e){let t={};if(e.isDefault())return t;let n;if(e.index_===B?n="$priority":e.index_===xl?n="$value":e.index_===Kt?n="$key":(f(e.index_ instanceof Qi,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Z(n),e.startSet_){let i=e.startAfterSet_?"startAfter":"startAt";t[i]=Z(e.indexStartValue_),e.startNameSet_&&(t[i]+=","+Z(e.indexStartName_))}if(e.endSet_){let i=e.endBeforeSet_?"endBefore":"endAt";t[i]=Z(e.indexEndValue_),e.endNameSet_&&(t[i]+=","+Z(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Em(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==B&&(t.i=e.index_.toString()),t}var Pc=class e extends Do{constructor(t,n,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=lr("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(f(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,i,r){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,i),a={};this.listens_[s]=a;let c=Cm(t._queryParams);this.restRequest_(o+".json",c,(l,d)=>{let u=d;if(l===404&&(u=null,l=null),l===null&&this.onDataUpdate_(o,u,!1,i),ge(this.listens_,s)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",r(h,null)}})}unlisten(t,n){let i=e.getListenId_(t,n);delete this.listens_[i]}get(t){let n=Cm(t._queryParams),i=t._path.toString(),r=new it;return this.restRequest_(i+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(t){}restRequest_(t,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+lu(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=jr(a.responseText)}catch{lt("Failed to parse JSON response for "+s+": "+a.responseText)}i(null,c)}else a.status!==401&&a.status!==404&&lt("Got unsuccessful REST response for "+s+" Status: "+a.status),i(a.status);i=null}},a.open("GET",s,!0),a.send()})}};var Fc=class{constructor(){this.rootNode_=E.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function Po(){return{value:null,children:new Map}}function Bn(e,t,n){if(A(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let i=S(t);e.children.has(i)||e.children.set(i,Po());let r=e.children.get(i);t=j(t),Bn(r,t,n)}}function Lc(e,t){if(A(t))return e.value=null,e.children.clear(),!0;if(e.value!==null){if(e.value.isLeafNode())return!1;{let n=e.value;return e.value=null,n.forEachChild(B,(i,r)=>{Bn(e,new O(i),r)}),Lc(e,t)}}else if(e.children.size>0){let n=S(t);return t=j(t),e.children.has(n)&&Lc(e.children.get(n),t)&&e.children.delete(n),e.children.size===0}else return!0}function Vc(e,t,n){e.value!==null?n(t,e.value):qy(e,(i,r)=>{let o=new O(t.toString()+"/"+i);Vc(r,o,n)})}function qy(e,t){e.children.forEach((n,i)=>{t(i,n)})}var jc=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=Object.assign({},t);return this.last_&&st(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=t,n}};var Im=10*1e3,Ky=30*1e3,Yy=5*60*1e3,Uc=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new jc(t);let i=Im+(Ky-Im)*Math.random();Hi(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let t=this.statsListener_.get(),n={},i=!1;st(t,(r,o)=>{o>0&&Rt(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),Hi(this.reportStats_.bind(this),Math.floor(Math.random()*2*Yy))}};var qt=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(qt||{});function Sl(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Al(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Tl(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var Bc=class e{constructor(t,n,i){this.path=t,this.affectedTree=n,this.revert=i,this.type=qt.ACK_USER_WRITE,this.source=Sl()}operationForChild(t){if(A(this.path)){if(this.affectedTree.value!=null)return f(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new O(t));return new e(N(),n,this.revert)}}else return f(S(this.path)===t,"operationForChild called for unrelated child."),new e(j(this.path),this.affectedTree,this.revert)}};var Fo=class e{constructor(t,n){this.source=t,this.path=n,this.type=qt.LISTEN_COMPLETE}operationForChild(t){return A(this.path)?new e(this.source,N()):new e(this.source,j(this.path))}};var Fn=class e{constructor(t,n,i){this.source=t,this.path=n,this.snap=i,this.type=qt.OVERWRITE}operationForChild(t){return A(this.path)?new e(this.source,N(),this.snap.getImmediateChild(t)):new e(this.source,j(this.path),this.snap)}};var er=class e{constructor(t,n,i){this.source=t,this.path=n,this.children=i,this.type=qt.MERGE}operationForChild(t){if(A(this.path)){let n=this.children.subtree(new O(t));return n.isEmpty()?null:n.value?new Fn(this.source,N(),n.value):new e(this.source,N(),n)}else return f(S(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,j(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Qt=class{constructor(t,n,i){this.node_=t,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(A(t))return this.isFullyInitialized()&&!this.filtered_;let n=S(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var zc=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function Qy(e,t,n,i){let r=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(By(s.childName,s.snapshotNode))}),zi(e,r,"child_removed",t,i,n),zi(e,r,"child_added",t,i,n),zi(e,r,"child_moved",o,i,n),zi(e,r,"child_changed",t,i,n),zi(e,r,"value",t,i,n),r}function zi(e,t,n,i,r,o){let s=i.filter(a=>a.type===n);s.sort((a,c)=>Xy(e,a,c)),s.forEach(a=>{let c=Zy(e,a,o);r.forEach(l=>{l.respondsTo(a.type)&&t.push(l.createEvent(c,e.query_))})})}function Zy(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function Xy(e,t,n){if(t.childName==null||n.childName==null)throw hn("Should only compare child_ events.");let i=new D(t.childName,t.snapshotNode),r=new D(n.childName,n.snapshotNode);return e.index_.compare(i,r)}function ts(e,t){return{eventCache:e,serverCache:t}}function Wi(e,t,n,i){return ts(new Qt(t,n,i),e.serverCache)}function ff(e,t,n,i){return ts(e.eventCache,new Qt(t,n,i))}function Lo(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ge(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var dc,Jy=()=>(dc||(dc=new Nt(Zv)),dc),mt=class e{constructor(t,n=Jy()){this.value=t,this.children=n}static fromObject(t){let n=new e(null);return st(t,(i,r)=>{n=n.set(new O(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:N(),value:this.value};if(A(t))return null;{let i=S(t),r=this.children.get(i);if(r!==null){let o=r.findRootMostMatchingPathAndValue(j(t),n);return o!=null?{path:G(new O(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(A(t))return this;{let n=S(t),i=this.children.get(n);return i!==null?i.subtree(j(t)):new e(null)}}set(t,n){if(A(t))return new e(n,this.children);{let i=S(t),o=(this.children.get(i)||new e(null)).set(j(t),n),s=this.children.insert(i,o);return new e(this.value,s)}}remove(t){if(A(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=S(t),i=this.children.get(n);if(i){let r=i.remove(j(t)),o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(A(t))return this.value;{let n=S(t),i=this.children.get(n);return i?i.get(j(t)):null}}setTree(t,n){if(A(t))return n;{let i=S(t),o=(this.children.get(i)||new e(null)).setTree(j(t),n),s;return o.isEmpty()?s=this.children.remove(i):s=this.children.insert(i,o),new e(this.value,s)}}fold(t){return this.fold_(N(),t)}fold_(t,n){let i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(G(t,r),n)}),n(t,this.value,i)}findOnPath(t,n){return this.findOnPath_(t,N(),n)}findOnPath_(t,n,i){let r=this.value?i(n,this.value):!1;if(r)return r;if(A(t))return null;{let o=S(t),s=this.children.get(o);return s?s.findOnPath_(j(t),G(n,o),i):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,N(),n)}foreachOnPath_(t,n,i){if(A(t))return this;{this.value&&i(n,this.value);let r=S(t),o=this.children.get(r);return o?o.foreachOnPath_(j(t),G(n,r),i):new e(null)}}foreach(t){this.foreach_(N(),t)}foreach_(t,n){this.children.inorderTraversal((i,r)=>{r.foreach_(G(t,i),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,i)=>{i.value&&t(n,i.value)})}};var Bt=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new mt(null))}};function Gi(e,t,n){if(A(t))return new Bt(new mt(n));{let i=e.writeTree_.findRootMostValueAndPath(t);if(i!=null){let r=i.path,o=i.value,s=ht(r,t);return o=o.updateChild(s,n),new Bt(e.writeTree_.set(r,o))}else{let r=new mt(n),o=e.writeTree_.setTree(t,r);return new Bt(o)}}}function Hc(e,t,n){let i=e;return st(n,(r,o)=>{i=Gi(i,G(t,r),o)}),i}function xm(e,t){if(A(t))return Bt.empty();{let n=e.writeTree_.setTree(t,new mt(null));return new Bt(n)}}function $c(e,t){return Ke(e,t)!=null}function Ke(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(ht(n.path,t)):null}function Sm(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(B,(i,r)=>{t.push(new D(i,r))}):e.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&t.push(new D(i,r.value))}),t}function Ie(e,t){if(A(t))return e;{let n=Ke(e,t);return n!=null?new Bt(new mt(n)):new Bt(e.writeTree_.subtree(t))}}function Wc(e){return e.writeTree_.isEmpty()}function Ln(e,t){return pf(N(),e.writeTree_,t)}function pf(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((r,o)=>{r===".priority"?(f(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=pf(G(e,r),o,n)}),!n.getChild(e).isEmpty()&&i!==null&&(n=n.updateChild(G(e,".priority"),i)),n}}function es(e,t){return vf(t,e)}function t0(e,t,n,i,r){f(i>e.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=Gi(e.visibleWrites,t,n)),e.lastWriteId=i}function e0(e,t,n,i){f(i>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:i,visible:!0}),e.visibleWrites=Hc(e.visibleWrites,t,n),e.lastWriteId=i}function n0(e,t){for(let n=0;n<e.allWrites.length;n++){let i=e.allWrites[n];if(i.writeId===t)return i}return null}function i0(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);f(n>=0,"removeWrite called with nonexistent writeId.");let i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,o=!1,s=e.allWrites.length-1;for(;r&&s>=0;){let a=e.allWrites[s];a.visible&&(s>=n&&r0(a,i.path)?r=!1:Mt(i.path,a.path)&&(o=!0)),s--}if(r){if(o)return o0(e),!0;if(i.snap)e.visibleWrites=xm(e.visibleWrites,i.path);else{let a=i.children;st(a,c=>{e.visibleWrites=xm(e.visibleWrites,G(i.path,c))})}return!0}else return!1}function r0(e,t){if(e.snap)return Mt(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&Mt(G(e.path,n),t))return!0;return!1}function o0(e){e.visibleWrites=gf(e.allWrites,s0,N()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function s0(e){return e.visible}function gf(e,t,n){let i=Bt.empty();for(let r=0;r<e.length;++r){let o=e[r];if(t(o)){let s=o.path,a;if(o.snap)Mt(n,s)?(a=ht(n,s),i=Gi(i,a,o.snap)):Mt(s,n)&&(a=ht(s,n),i=Gi(i,N(),o.snap.getChild(a)));else if(o.children){if(Mt(n,s))a=ht(n,s),i=Hc(i,a,o.children);else if(Mt(s,n))if(a=ht(s,n),A(a))i=Hc(i,N(),o.children);else{let c=ge(o.children,S(a));if(c){let l=c.getChild(j(a));i=Gi(i,N(),l)}}}else throw hn("WriteRecord should have .snap or .children")}}return i}function bf(e,t,n,i,r){if(!i&&!r){let o=Ke(e.visibleWrites,t);if(o!=null)return o;{let s=Ie(e.visibleWrites,t);if(Wc(s))return n;if(n==null&&!$c(s,N()))return null;{let a=n||E.EMPTY_NODE;return Ln(s,a)}}}else{let o=Ie(e.visibleWrites,t);if(!r&&Wc(o))return n;if(!r&&n==null&&!$c(o,N()))return null;{let s=function(l){return(l.visible||r)&&(!i||!~i.indexOf(l.writeId))&&(Mt(l.path,t)||Mt(t,l.path))},a=gf(e.allWrites,s,t),c=n||E.EMPTY_NODE;return Ln(a,c)}}}function a0(e,t,n){let i=E.EMPTY_NODE,r=Ke(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(B,(o,s)=>{i=i.updateImmediateChild(o,s)}),i;if(n){let o=Ie(e.visibleWrites,t);return n.forEachChild(B,(s,a)=>{let c=Ln(Ie(o,new O(s)),a);i=i.updateImmediateChild(s,c)}),Sm(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}else{let o=Ie(e.visibleWrites,t);return Sm(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}}function c0(e,t,n,i,r){f(i||r,"Either existingEventSnap or existingServerSnap must exist");let o=G(t,n);if($c(e.visibleWrites,o))return null;{let s=Ie(e.visibleWrites,o);return Wc(s)?r.getChild(n):Ln(s,r.getChild(n))}}function l0(e,t,n,i){let r=G(t,n),o=Ke(e.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){let s=Ie(e.visibleWrites,r);return Ln(s,i.getNode().getImmediateChild(n))}else return null}function d0(e,t){return Ke(e.visibleWrites,t)}function u0(e,t,n,i,r,o,s){let a,c=Ie(e.visibleWrites,t),l=Ke(c,N());if(l!=null)a=l;else if(n!=null)a=Ln(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let d=[],u=s.getCompare(),h=o?a.getReverseIteratorFrom(i,s):a.getIteratorFrom(i,s),m=h.getNext();for(;m&&d.length<r;)u(m,i)!==0&&d.push(m),m=h.getNext();return d}else return[]}function h0(){return{visibleWrites:Bt.empty(),allWrites:[],lastWriteId:-1}}function Vo(e,t,n,i){return bf(e.writeTree,e.treePath,t,n,i)}function Dl(e,t){return a0(e.writeTree,e.treePath,t)}function Am(e,t,n,i){return c0(e.writeTree,e.treePath,t,n,i)}function jo(e,t){return d0(e.writeTree,G(e.treePath,t))}function m0(e,t,n,i,r,o){return u0(e.writeTree,e.treePath,t,n,i,r,o)}function Rl(e,t,n){return l0(e.writeTree,e.treePath,t,n)}function _f(e,t){return vf(G(e.treePath,t),e.writeTree)}function vf(e,t){return{treePath:e,writeTree:t}}var Gc=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,i=t.childName;f(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),f(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,Xi(i,t.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,Zi(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,Pn(i,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,Xi(i,t.snapshotNode,r.oldSnap));else throw hn("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}};var qc=class{getCompleteChild(t){return null}getChildAfterChild(t,n,i){return null}},yf=new qc,nr=class{constructor(t,n,i=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let i=this.optCompleteServerCache_!=null?new Qt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Rl(this.writes_,t,i)}}getChildAfterChild(t,n,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ge(this.viewCache_),o=m0(this.writes_,r,n,1,i,t);return o.length===0?null:o[0]}};function f0(e){return{filter:e}}function p0(e,t){f(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),f(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function g0(e,t,n,i,r){let o=new Gc,s,a;if(n.type===qt.OVERWRITE){let l=n;l.source.fromUser?s=Kc(e,t,l.path,l.snap,i,r,o):(f(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!A(l.path),s=Uo(e,t,l.path,l.snap,i,r,a,o))}else if(n.type===qt.MERGE){let l=n;l.source.fromUser?s=_0(e,t,l.path,l.children,i,r,o):(f(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=Yc(e,t,l.path,l.children,i,r,a,o))}else if(n.type===qt.ACK_USER_WRITE){let l=n;l.revert?s=w0(e,t,l.path,i,r,o):s=v0(e,t,l.path,l.affectedTree,i,r,o)}else if(n.type===qt.LISTEN_COMPLETE)s=y0(e,t,n.path,i,o);else throw hn("Unknown operation type: "+n.type);let c=o.getChanges();return b0(t,s,c),{viewCache:s,changes:c}}function b0(e,t,n){let i=t.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Lo(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(mf(Lo(t)))}}function wf(e,t,n,i,r,o){let s=t.eventCache;if(jo(i,n)!=null)return t;{let a,c;if(A(n))if(f(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let l=Ge(t),d=l instanceof E?l:E.EMPTY_NODE,u=Dl(i,d);a=e.filter.updateFullNode(t.eventCache.getNode(),u,o)}else{let l=Vo(i,Ge(t));a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{let l=S(n);if(l===".priority"){f(Ae(n)===1,"Can't have a priority with additional path components");let d=s.getNode();c=t.serverCache.getNode();let u=Am(i,n,d,c);u!=null?a=e.filter.updatePriority(d,u):a=s.getNode()}else{let d=j(n),u;if(s.isCompleteForChild(l)){c=t.serverCache.getNode();let h=Am(i,n,s.getNode(),c);h!=null?u=s.getNode().getImmediateChild(l).updateChild(d,h):u=s.getNode().getImmediateChild(l)}else u=Rl(i,l,t.serverCache);u!=null?a=e.filter.updateChild(s.getNode(),l,u,d,r,o):a=s.getNode()}}return Wi(t,a,s.isFullyInitialized()||A(n),e.filter.filtersNodes())}}function Uo(e,t,n,i,r,o,s,a){let c=t.serverCache,l,d=s?e.filter:e.filter.getIndexedFilter();if(A(n))l=d.updateFullNode(c.getNode(),i,null);else if(d.filtersNodes()&&!c.isFiltered()){let m=c.getNode().updateChild(n,i);l=d.updateFullNode(c.getNode(),m,null)}else{let m=S(n);if(!c.isCompleteForPath(n)&&Ae(n)>1)return t;let g=j(n),R=c.getNode().getImmediateChild(m).updateChild(g,i);m===".priority"?l=d.updatePriority(c.getNode(),R):l=d.updateChild(c.getNode(),m,R,g,yf,null)}let u=ff(t,l,c.isFullyInitialized()||A(n),d.filtersNodes()),h=new nr(r,u,o);return wf(e,u,n,r,h,a)}function Kc(e,t,n,i,r,o,s){let a=t.eventCache,c,l,d=new nr(r,t,o);if(A(n))l=e.filter.updateFullNode(t.eventCache.getNode(),i,s),c=Wi(t,l,!0,e.filter.filtersNodes());else{let u=S(n);if(u===".priority")l=e.filter.updatePriority(t.eventCache.getNode(),i),c=Wi(t,l,a.isFullyInitialized(),a.isFiltered());else{let h=j(n),m=a.getNode().getImmediateChild(u),g;if(A(h))g=i;else{let y=d.getCompleteChild(u);y!=null?wl(h)===".priority"&&y.getChild(af(h)).isEmpty()?g=y:g=y.updateChild(h,i):g=E.EMPTY_NODE}if(m.equals(g))c=t;else{let y=e.filter.updateChild(a.getNode(),u,g,h,d,s);c=Wi(t,y,a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function Tm(e,t){return e.eventCache.isCompleteForChild(t)}function _0(e,t,n,i,r,o,s){let a=t;return i.foreach((c,l)=>{let d=G(n,c);Tm(t,S(d))&&(a=Kc(e,a,d,l,r,o,s))}),i.foreach((c,l)=>{let d=G(n,c);Tm(t,S(d))||(a=Kc(e,a,d,l,r,o,s))}),a}function Dm(e,t,n){return n.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function Yc(e,t,n,i,r,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;A(n)?l=i:l=new mt(null).setTree(n,i);let d=t.serverCache.getNode();return l.children.inorderTraversal((u,h)=>{if(d.hasChild(u)){let m=t.serverCache.getNode().getImmediateChild(u),g=Dm(e,m,h);c=Uo(e,c,new O(u),g,r,o,s,a)}}),l.children.inorderTraversal((u,h)=>{let m=!t.serverCache.isCompleteForChild(u)&&h.value===null;if(!d.hasChild(u)&&!m){let g=t.serverCache.getNode().getImmediateChild(u),y=Dm(e,g,h);c=Uo(e,c,new O(u),y,r,o,s,a)}}),c}function v0(e,t,n,i,r,o,s){if(jo(r,n)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(i.value!=null){if(A(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Uo(e,t,n,c.getNode().getChild(n),r,o,a,s);if(A(n)){let l=new mt(null);return c.getNode().forEachChild(Kt,(d,u)=>{l=l.set(new O(d),u)}),Yc(e,t,n,l,r,o,a,s)}else return t}else{let l=new mt(null);return i.foreach((d,u)=>{let h=G(n,d);c.isCompleteForPath(h)&&(l=l.set(d,c.getNode().getChild(h)))}),Yc(e,t,n,l,r,o,a,s)}}function y0(e,t,n,i,r){let o=t.serverCache,s=ff(t,o.getNode(),o.isFullyInitialized()||A(n),o.isFiltered());return wf(e,s,n,i,yf,r)}function w0(e,t,n,i,r,o){let s;if(jo(i,n)!=null)return t;{let a=new nr(i,t,r),c=t.eventCache.getNode(),l;if(A(n)||S(n)===".priority"){let d;if(t.serverCache.isFullyInitialized())d=Vo(i,Ge(t));else{let u=t.serverCache.getNode();f(u instanceof E,"serverChildren would be complete if leaf node"),d=Dl(i,u)}d=d,l=e.filter.updateFullNode(c,d,o)}else{let d=S(n),u=Rl(i,d,t.serverCache);u==null&&t.serverCache.isCompleteForChild(d)&&(u=c.getImmediateChild(d)),u!=null?l=e.filter.updateChild(c,d,u,j(n),a,o):t.eventCache.getNode().hasChild(d)?l=e.filter.updateChild(c,d,E.EMPTY_NODE,j(n),a,o):l=c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=Vo(i,Ge(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,o)))}return s=t.serverCache.isFullyInitialized()||jo(i,N())!=null,Wi(t,l,s,e.filter.filtersNodes())}}var Qc=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let i=this.query_._queryParams,r=new Ji(i.getIndex()),o=zy(i);this.processor_=f0(o);let s=n.serverCache,a=n.eventCache,c=r.updateFullNode(E.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(E.EMPTY_NODE,a.getNode(),null),d=new Qt(c,s.isFullyInitialized(),r.filtersNodes()),u=new Qt(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=ts(u,d),this.eventGenerator_=new zc(this.query_)}get query(){return this.query_}};function C0(e){return e.viewCache_.serverCache.getNode()}function E0(e){return Lo(e.viewCache_)}function I0(e,t){let n=Ge(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!A(t)&&!n.getImmediateChild(S(t)).isEmpty())?n.getChild(t):null}function Rm(e){return e.eventRegistrations_.length===0}function x0(e,t){e.eventRegistrations_.push(t)}function km(e,t,n){let i=[];if(n){f(t==null,"A cancel should cancel all event registrations.");let r=e.query._path;e.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,r);s&&i.push(s)})}if(t){let r=[];for(let o=0;o<e.eventRegistrations_.length;++o){let s=e.eventRegistrations_[o];if(!s.matches(t))r.push(s);else if(t.hasAnyCallback()){r=r.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=r}else e.eventRegistrations_=[];return i}function Mm(e,t,n,i){t.type===qt.MERGE&&t.source.queryId!==null&&(f(Ge(e.viewCache_),"We should always have a full cache before handling merges"),f(Lo(e.viewCache_),"Missing event cache, even though we have a server cache"));let r=e.viewCache_,o=g0(e.processor_,r,t,n,i);return p0(e.processor_,o.viewCache),f(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,Cf(e,o.changes,o.viewCache.eventCache.getNode(),null)}function S0(e,t){let n=e.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(B,(o,s)=>{i.push(Pn(o,s))}),n.isFullyInitialized()&&i.push(mf(n.getNode())),Cf(e,i,n.getNode(),t)}function Cf(e,t,n,i){let r=i?[i]:e.eventRegistrations_;return Qy(e.eventGenerator_,t,n,r)}var Bo,zo=class{constructor(){this.views=new Map}};function A0(e){f(!Bo,"__referenceConstructor has already been defined"),Bo=e}function T0(){return f(Bo,"Reference.ts has not been loaded"),Bo}function D0(e){return e.views.size===0}function kl(e,t,n,i){let r=t.source.queryId;if(r!==null){let o=e.views.get(r);return f(o!=null,"SyncTree gave us an op for an invalid query."),Mm(o,t,n,i)}else{let o=[];for(let s of e.views.values())o=o.concat(Mm(s,t,n,i));return o}}function Ef(e,t,n,i,r){let o=t._queryIdentifier,s=e.views.get(o);if(!s){let a=Vo(n,r?i:null),c=!1;a?c=!0:i instanceof E?(a=Dl(n,i),c=!1):(a=E.EMPTY_NODE,c=!1);let l=ts(new Qt(a,c,!1),new Qt(i,r,!1));return new Qc(t,l)}return s}function R0(e,t,n,i,r,o){let s=Ef(e,t,i,r,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),x0(s,n),S0(s,n)}function k0(e,t,n,i){let r=t._queryIdentifier,o=[],s=[],a=Te(e);if(r==="default")for(let[c,l]of e.views.entries())s=s.concat(km(l,n,i)),Rm(l)&&(e.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=e.views.get(r);c&&(s=s.concat(km(c,n,i)),Rm(c)&&(e.views.delete(r),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Te(e)&&o.push(new(T0())(t._repo,t._path)),{removed:o,events:s}}function If(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function xe(e,t){let n=null;for(let i of e.views.values())n=n||I0(i,t);return n}function xf(e,t){if(t._queryParams.loadsAllData())return ns(e);{let i=t._queryIdentifier;return e.views.get(i)}}function Sf(e,t){return xf(e,t)!=null}function Te(e){return ns(e)!=null}function ns(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var Ho;function M0(e){f(!Ho,"__referenceConstructor has already been defined"),Ho=e}function N0(){return f(Ho,"Reference.ts has not been loaded"),Ho}var O0=1,$o=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new mt(null),this.pendingWriteTree_=h0(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Ml(e,t,n,i,r){return t0(e.pendingWriteTree_,t,n,i,r),r?zn(e,new Fn(Sl(),t,n)):[]}function P0(e,t,n,i){e0(e.pendingWriteTree_,t,n,i);let r=mt.fromObject(n);return zn(e,new er(Sl(),t,r))}function Ee(e,t,n=!1){let i=n0(e.pendingWriteTree_,t);if(i0(e.pendingWriteTree_,t)){let o=new mt(null);return i.snap!=null?o=o.set(N(),!0):st(i.children,s=>{o=o.set(new O(s),!0)}),zn(e,new Bc(i.path,o,n))}else return[]}function ur(e,t,n){return zn(e,new Fn(Al(),t,n))}function F0(e,t,n){let i=mt.fromObject(n);return zn(e,new er(Al(),t,i))}function L0(e,t){return zn(e,new Fo(Al(),t))}function V0(e,t,n){let i=Nl(e,n);if(i){let r=Ol(i),o=r.path,s=r.queryId,a=ht(o,t),c=new Fo(Tl(s),a);return Pl(e,o,c)}else return[]}function Wo(e,t,n,i,r=!1){let o=t._path,s=e.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||Sf(s,t))){let c=k0(s,t,n,i);D0(s)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!r){let d=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,u=e.syncPointTree_.findOnPath(o,(h,m)=>Te(m));if(d&&!u){let h=e.syncPointTree_.subtree(o);if(!h.isEmpty()){let m=B0(h);for(let g=0;g<m.length;++g){let y=m[g],R=y.query,$=Rf(e,y);e.listenProvider_.startListening(qi(R),ir(e,R),$.hashFn,$.onComplete)}}}!u&&l.length>0&&!i&&(d?e.listenProvider_.stopListening(qi(t),null):l.forEach(h=>{let m=e.queryToTagMap.get(rs(h));e.listenProvider_.stopListening(qi(h),m)}))}z0(e,l)}return a}function Af(e,t,n,i){let r=Nl(e,i);if(r!=null){let o=Ol(r),s=o.path,a=o.queryId,c=ht(s,t),l=new Fn(Tl(a),c,n);return Pl(e,s,l)}else return[]}function j0(e,t,n,i){let r=Nl(e,i);if(r){let o=Ol(r),s=o.path,a=o.queryId,c=ht(s,t),l=mt.fromObject(n),d=new er(Tl(a),c,l);return Pl(e,s,d)}else return[]}function Zc(e,t,n,i=!1){let r=t._path,o=null,s=!1;e.syncPointTree_.foreachOnPath(r,(h,m)=>{let g=ht(h,r);o=o||xe(m,g),s=s||Te(m)});let a=e.syncPointTree_.get(r);a?(s=s||Te(a),o=o||xe(a,N())):(a=new zo,e.syncPointTree_=e.syncPointTree_.set(r,a));let c;o!=null?c=!0:(c=!1,o=E.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((m,g)=>{let y=xe(g,N());y&&(o=o.updateImmediateChild(m,y))}));let l=Sf(a,t);if(!l&&!t._queryParams.loadsAllData()){let h=rs(t);f(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");let m=H0();e.queryToTagMap.set(h,m),e.tagToQueryMap.set(m,h)}let d=es(e.pendingWriteTree_,r),u=R0(a,t,n,d,o,c);if(!l&&!s&&!i){let h=xf(a,t);u=u.concat($0(e,t,h))}return u}function is(e,t,n){let r=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{let c=ht(s,t),l=xe(a,c);if(l)return l});return bf(r,t,o,n,!0)}function U0(e,t){let n=t._path,i=null;e.syncPointTree_.foreachOnPath(n,(l,d)=>{let u=ht(l,n);i=i||xe(d,u)});let r=e.syncPointTree_.get(n);r?i=i||xe(r,N()):(r=new zo,e.syncPointTree_=e.syncPointTree_.set(n,r));let o=i!=null,s=o?new Qt(i,!0,!1):null,a=es(e.pendingWriteTree_,t._path),c=Ef(r,t,a,o?s.getNode():E.EMPTY_NODE,o);return E0(c)}function zn(e,t){return Tf(t,e.syncPointTree_,null,es(e.pendingWriteTree_,N()))}function Tf(e,t,n,i){if(A(e.path))return Df(e,t,n,i);{let r=t.get(N());n==null&&r!=null&&(n=xe(r,N()));let o=[],s=S(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,d=_f(i,s);o=o.concat(Tf(a,c,l,d))}return r&&(o=o.concat(kl(r,e,i,n))),o}}function Df(e,t,n,i){let r=t.get(N());n==null&&r!=null&&(n=xe(r,N()));let o=[];return t.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=_f(i,s),d=e.operationForChild(s);d&&(o=o.concat(Df(d,a,c,l)))}),r&&(o=o.concat(kl(r,e,i,n))),o}function Rf(e,t){let n=t.query,i=ir(e,n);return{hashFn:()=>(C0(t)||E.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?V0(e,n._path,i):L0(e,n._path);{let o=ty(r,n);return Wo(e,n,null,o)}}}}function ir(e,t){let n=rs(t);return e.queryToTagMap.get(n)}function rs(e){return e._path.toString()+"$"+e._queryIdentifier}function Nl(e,t){return e.tagToQueryMap.get(t)}function Ol(e){let t=e.indexOf("$");return f(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new O(e.substr(0,t))}}function Pl(e,t,n){let i=e.syncPointTree_.get(t);f(i,"Missing sync point for query tag that we're tracking");let r=es(e.pendingWriteTree_,t);return kl(i,n,r,null)}function B0(e){return e.fold((t,n,i)=>{if(n&&Te(n))return[ns(n)];{let r=[];return n&&(r=If(n)),st(i,(o,s)=>{r=r.concat(s)}),r}})}function qi(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(N0())(e._repo,e._path):e}function z0(e,t){for(let n=0;n<t.length;++n){let i=t[n];if(!i._queryParams.loadsAllData()){let r=rs(i),o=e.queryToTagMap.get(r);e.queryToTagMap.delete(r),e.tagToQueryMap.delete(o)}}}function H0(){return O0++}function $0(e,t,n){let i=t._path,r=ir(e,t),o=Rf(e,n),s=e.listenProvider_.startListening(qi(t),r,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(i);if(r)f(!Te(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,d,u)=>{if(!A(l)&&d&&Te(d))return[ns(d).query];{let h=[];return d&&(h=h.concat(If(d).map(m=>m.query))),st(u,(m,g)=>{h=h.concat(g)}),h}});for(let l=0;l<c.length;++l){let d=c[l];e.listenProvider_.stopListening(qi(d),ir(e,d))}}return s}var Xc=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},Jc=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=G(this.path_,t);return new e(this.syncTree_,n)}node(){return is(this.syncTree_,this.path_)}},W0=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},Nm=function(e,t,n){if(!e||typeof e!="object")return e;if(f(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return G0(e[".sv"],t,n);if(typeof e[".sv"]=="object")return q0(e[".sv"],t);f(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},G0=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:f(!1,"Unexpected server value: "+e)}},q0=function(e,t,n){e.hasOwnProperty("increment")||f(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let i=e.increment;typeof i!="number"&&f(!1,"Unexpected increment value: "+i);let r=t.node();if(f(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let s=r.getValue();return typeof s!="number"?i:s+i},kf=function(e,t,n,i){return Ll(t,new Jc(n,e),i)},Fl=function(e,t,n){return Ll(e,new Xc(t),n)};function Ll(e,t,n){let i=e.getPriority().val(),r=Nm(i,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let s=e,a=Nm(s.getValue(),t,n);return a!==s.getValue()||r!==s.getPriority().val()?new Nn(a,q(r)):e}else{let s=e;return o=s,r!==s.getPriority().val()&&(o=o.updatePriority(new Nn(r))),s.forEachChild(B,(a,c)=>{let l=Ll(c,t.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var rr=class{constructor(t="",n=null,i={children:{},childCount:0}){this.name=t,this.parent=n,this.node=i}};function os(e,t){let n=t instanceof O?t:new O(t),i=e,r=S(n);for(;r!==null;){let o=ge(i.node.children,r)||{children:{},childCount:0};i=new rr(r,i,o),n=j(n),r=S(n)}return i}function Ye(e){return e.node.value}function Vl(e,t){e.node.value=t,tl(e)}function Mf(e){return e.node.childCount>0}function K0(e){return Ye(e)===void 0&&!Mf(e)}function ss(e,t){st(e.node.children,(n,i)=>{t(new rr(n,e,i))})}function Nf(e,t,n,i){n&&!i&&t(e),ss(e,r=>{Nf(r,t,!0,i)}),n&&i&&t(e)}function Y0(e,t,n){let i=n?e:e.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function hr(e){return new O(e.parent===null?e.name:hr(e.parent)+"/"+e.name)}function tl(e){e.parent!==null&&Q0(e.parent,e.name,e)}function Q0(e,t,n){let i=K0(n),r=Rt(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,tl(e)):!i&&!r&&(e.node.children[t]=n.node,e.node.childCount++,tl(e))}var Z0=/[\[\].#$\/\u0000-\u001F\u007F]/,X0=/[\[\].#$\u0000-\u001F\u007F]/,uc=10*1024*1024,as=function(e){return typeof e=="string"&&e.length!==0&&!Z0.test(e)},Of=function(e){return typeof e=="string"&&e.length!==0&&!X0.test(e)},J0=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Of(e)},or=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Xo(e)||e&&typeof e=="object"&&Rt(e,".sv")},Zt=function(e,t,n,i){i&&t===void 0||mr(pt(e,"value"),t,n)},mr=function(e,t,n){let i=n instanceof O?new Ic(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+He(i));if(typeof t=="function")throw new Error(e+"contains a function "+He(i)+" with contents = "+t.toString());if(Xo(t))throw new Error(e+"contains "+t.toString()+" "+He(i));if(typeof t=="string"&&t.length>uc/3&&oi(t)>uc)throw new Error(e+"contains a string greater than "+uc+" utf8 bytes "+He(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,o=!1;if(st(t,(s,a)=>{if(s===".value")r=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!as(s)))throw new Error(e+" contains an invalid key ("+s+") "+He(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Dy(i,s),mr(e,a,i),Ry(i)}),r&&o)throw new Error(e+' contains ".value" child '+He(i)+" in addition to actual children.")}},tw=function(e,t){let n,i;for(n=0;n<t.length;n++){i=t[n];let o=Yi(i);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!as(o[s]))throw new Error(e+"contains an invalid key ("+o[s]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(Ty);let r=null;for(n=0;n<t.length;n++){if(i=t[n],r!==null&&Mt(r,i))throw new Error(e+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},Pf=function(e,t,n,i){if(i&&t===void 0)return;let r=pt(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");let o=[];st(t,(s,a)=>{let c=new O(s);if(mr(r,a,G(n,c)),wl(c)===".priority"&&!or(a))throw new Error(r+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),tw(r,o)},jl=function(e,t,n){if(!(n&&t===void 0)){if(Xo(t))throw new Error(pt(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!or(t))throw new Error(pt(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},fr=function(e,t,n,i){if(!(i&&n===void 0)&&!as(n))throw new Error(pt(e,t)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Hn=function(e,t,n,i){if(!(i&&n===void 0)&&!Of(n))throw new Error(pt(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},ew=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Hn(e,t,n,i)},Ct=function(e,t){if(S(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},Ff=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!as(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!J0(n))throw new Error(pt(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var el=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function cs(e,t){let n=null;for(let i=0;i<t.length;i++){let r=t[i],o=r.getPath();n!==null&&!Cl(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&e.eventLists_.push(n)}function Lf(e,t,n){cs(e,n),Vf(e,i=>Cl(i,t))}function Et(e,t,n){cs(e,n),Vf(e,i=>Mt(i,t)||Mt(t,i))}function Vf(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){let r=e.eventLists_[i];if(r){let o=r.path;t(o)?(nw(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function nw(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let i=n.getEventRunner();We&&ot("event: "+n.toString()),Un(i)}}}var jf="repo_interrupt",iw=25,nl=class{constructor(t,n,i,r){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new el,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Po(),this.transactionQueueTree_=new rr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function rw(e,t,n){if(e.stats_=yl(e.repoInfo_),e.forceRestClient_||ry())e.server_=new Pc(e.repoInfo_,(i,r,o,s)=>{Om(e,i,r,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Pm(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Z(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new El(e.repoInfo_,t,(i,r,o,s)=>{Om(e,i,r,o,s)},i=>{Pm(e,i)},i=>{ow(e,i)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(i=>{e.server_.refreshAuthToken(i)}),e.appCheckProvider_.addTokenChangeListener(i=>{e.server_.refreshAppCheckToken(i.token)}),e.statsReporter_=sy(e.repoInfo_,()=>new Uc(e.stats_,e.server_)),e.infoData_=new Fc,e.infoSyncTree_=new $o({startListening:(i,r,o,s)=>{let a=[],c=e.infoData_.getNode(i._path);return c.isEmpty()||(a=ur(e.infoSyncTree_,i._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Ul(e,"connected",!1),e.serverSyncTree_=new $o({startListening:(i,r,o,s)=>(e.server_.listen(i,o,r,(a,c)=>{let l=s(a,c);Et(e.eventQueue_,i._path,l)}),[]),stopListening:(i,r)=>{e.server_.unlisten(i,r)}})}function Uf(e){let n=e.infoData_.getNode(new O(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function pr(e){return W0({timestamp:Uf(e)})}function Om(e,t,n,i,r){e.dataUpdateCount++;let o=new O(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(r)if(i){let c=ri(n,l=>q(l));s=j0(e.serverSyncTree_,o,c,r)}else{let c=q(n);s=Af(e.serverSyncTree_,o,c,r)}else if(i){let c=ri(n,l=>q(l));s=F0(e.serverSyncTree_,o,c)}else{let c=q(n);s=ur(e.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Vn(e,o)),Et(e.eventQueue_,a,s)}function Pm(e,t){Ul(e,"connected",t),t===!1&&cw(e)}function ow(e,t){st(t,(n,i)=>{Ul(e,n,i)})}function Ul(e,t,n){let i=new O("/.info/"+t),r=q(n);e.infoData_.updateSnapshot(i,r);let o=ur(e.infoSyncTree_,i,r);Et(e.eventQueue_,i,o)}function ls(e){return e.nextWriteId_++}function sw(e,t,n){let i=U0(e.serverSyncTree_,t);return i!=null?Promise.resolve(i):e.server_.get(t).then(r=>{let o=q(r).withIndex(t._queryParams.getIndex());Zc(e.serverSyncTree_,t,n,!0);let s;if(t._queryParams.loadsAllData())s=ur(e.serverSyncTree_,t._path,o);else{let a=ir(e.serverSyncTree_,t);s=Af(e.serverSyncTree_,t._path,o,a)}return Et(e.eventQueue_,t._path,s),Wo(e.serverSyncTree_,t,n,null,!0),o},r=>($n(e,"get for query "+Z(t)+" failed: "+r),Promise.reject(new Error(r))))}function Bl(e,t,n,i,r){$n(e,"set",{path:t.toString(),value:n,priority:i});let o=pr(e),s=q(n,i),a=is(e.serverSyncTree_,t),c=Fl(s,a,o),l=ls(e),d=Ml(e.serverSyncTree_,t,c,l,!0);cs(e.eventQueue_,d),e.server_.put(t.toString(),s.val(!0),(h,m)=>{let g=h==="ok";g||lt("set at "+t+" failed: "+h);let y=Ee(e.serverSyncTree_,l,!g);Et(e.eventQueue_,t,y),De(e,r,h,m)});let u=Hl(e,t);Vn(e,u),Et(e.eventQueue_,u,[])}function aw(e,t,n,i){$n(e,"update",{path:t.toString(),value:n});let r=!0,o=pr(e),s={};if(st(n,(a,c)=>{r=!1,s[a]=kf(G(t,a),q(c),e.serverSyncTree_,o)}),r)ot("update() called with empty data.  Don't do anything."),De(e,i,"ok",void 0);else{let a=ls(e),c=P0(e.serverSyncTree_,t,s,a);cs(e.eventQueue_,c),e.server_.merge(t.toString(),n,(l,d)=>{let u=l==="ok";u||lt("update at "+t+" failed: "+l);let h=Ee(e.serverSyncTree_,a,!u),m=h.length>0?Vn(e,t):t;Et(e.eventQueue_,m,h),De(e,i,l,d)}),st(n,l=>{let d=Hl(e,G(t,l));Vn(e,d)}),Et(e.eventQueue_,t,[])}}function cw(e){$n(e,"onDisconnectEvents");let t=pr(e),n=Po();Vc(e.onDisconnect_,N(),(r,o)=>{let s=kf(r,o,e.serverSyncTree_,t);Bn(n,r,s)});let i=[];Vc(n,N(),(r,o)=>{i=i.concat(ur(e.serverSyncTree_,r,o));let s=Hl(e,r);Vn(e,s)}),e.onDisconnect_=Po(),Et(e.eventQueue_,N(),i)}function lw(e,t,n){e.server_.onDisconnectCancel(t.toString(),(i,r)=>{i==="ok"&&Lc(e.onDisconnect_,t),De(e,n,i,r)})}function Fm(e,t,n,i){let r=q(n);e.server_.onDisconnectPut(t.toString(),r.val(!0),(o,s)=>{o==="ok"&&Bn(e.onDisconnect_,t,r),De(e,i,o,s)})}function dw(e,t,n,i,r){let o=q(n,i);e.server_.onDisconnectPut(t.toString(),o.val(!0),(s,a)=>{s==="ok"&&Bn(e.onDisconnect_,t,o),De(e,r,s,a)})}function uw(e,t,n,i){if(Ur(n)){ot("onDisconnect().update() called with empty data.  Don't do anything."),De(e,i,"ok",void 0);return}e.server_.onDisconnectMerge(t.toString(),n,(r,o)=>{r==="ok"&&st(n,(s,a)=>{let c=q(a);Bn(e.onDisconnect_,G(t,s),c)}),De(e,i,r,o)})}function hw(e,t,n){let i;S(t._path)===".info"?i=Zc(e.infoSyncTree_,t,n):i=Zc(e.serverSyncTree_,t,n),Lf(e.eventQueue_,t._path,i)}function il(e,t,n){let i;S(t._path)===".info"?i=Wo(e.infoSyncTree_,t,n):i=Wo(e.serverSyncTree_,t,n),Lf(e.eventQueue_,t._path,i)}function Bf(e){e.persistentConnection_&&e.persistentConnection_.interrupt(jf)}function mw(e){e.persistentConnection_&&e.persistentConnection_.resume(jf)}function $n(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),ot(n,...t)}function De(e,t,n,i){t&&Un(()=>{if(n==="ok")t(null);else{let r=(n||"error").toUpperCase(),o=r;i&&(o+=": "+i);let s=new Error(o);s.code=r,t(s)}})}function fw(e,t,n,i,r,o){$n(e,"transaction on "+t);let s={path:t,update:n,onComplete:i,status:null,order:jm(),applyLocally:o,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=zl(e,t,void 0);s.currentInputSnapshot=a;let c=s.update(a.val());if(c===void 0)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{mr("transaction failed: Data returned ",c,s.path),s.status=0;let l=os(e.transactionQueueTree_,t),d=Ye(l)||[];d.push(s),Vl(l,d);let u;typeof c=="object"&&c!==null&&Rt(c,".priority")?(u=ge(c,".priority"),f(or(u),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):u=(is(e.serverSyncTree_,t)||E.EMPTY_NODE).getPriority().val();let h=pr(e),m=q(c,u),g=Fl(m,a,h);s.currentOutputSnapshotRaw=m,s.currentOutputSnapshotResolved=g,s.currentWriteId=ls(e);let y=Ml(e.serverSyncTree_,t,g,s.currentWriteId,s.applyLocally);Et(e.eventQueue_,t,y),ds(e,e.transactionQueueTree_)}}function zl(e,t,n){return is(e.serverSyncTree_,t,n)||E.EMPTY_NODE}function ds(e,t=e.transactionQueueTree_){if(t||us(e,t),Ye(t)){let n=Hf(e,t);f(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&pw(e,hr(t),n)}else Mf(t)&&ss(t,n=>{ds(e,n)})}function pw(e,t,n){let i=n.map(l=>l.currentWriteId),r=zl(e,t,i),o=r,s=r.hash();for(let l=0;l<n.length;l++){let d=n[l];f(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let u=ht(t,d.path);o=o.updateChild(u,d.currentOutputSnapshotRaw)}let a=o.val(!0),c=t;e.server_.put(c.toString(),a,l=>{$n(e,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let u=[];for(let h=0;h<n.length;h++)n[h].status=2,d=d.concat(Ee(e.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&u.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();us(e,os(e.transactionQueueTree_,t)),ds(e,e.transactionQueueTree_),Et(e.eventQueue_,t,d);for(let h=0;h<u.length;h++)Un(u[h])}else{if(l==="datastale")for(let u=0;u<n.length;u++)n[u].status===3?n[u].status=4:n[u].status=0;else{lt("transaction at "+c.toString()+" failed: "+l);for(let u=0;u<n.length;u++)n[u].status=4,n[u].abortReason=l}Vn(e,t)}},s)}function Vn(e,t){let n=zf(e,t),i=hr(n),r=Hf(e,n);return gw(e,r,i),i}function gw(e,t,n){if(t.length===0)return;let i=[],r=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],l=ht(n,c.path),d=!1,u;if(f(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,u=c.abortReason,r=r.concat(Ee(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=iw)d=!0,u="maxretry",r=r.concat(Ee(e.serverSyncTree_,c.currentWriteId,!0));else{let h=zl(e,c.path,s);c.currentInputSnapshot=h;let m=t[a].update(h.val());if(m!==void 0){mr("transaction failed: Data returned ",m,c.path);let g=q(m);typeof m=="object"&&m!=null&&Rt(m,".priority")||(g=g.updatePriority(h.getPriority()));let R=c.currentWriteId,$=pr(e),tt=Fl(g,h,$);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=tt,c.currentWriteId=ls(e),s.splice(s.indexOf(R),1),r=r.concat(Ml(e.serverSyncTree_,c.path,tt,c.currentWriteId,c.applyLocally)),r=r.concat(Ee(e.serverSyncTree_,R,!0))}else d=!0,u="nodata",r=r.concat(Ee(e.serverSyncTree_,c.currentWriteId,!0))}Et(e.eventQueue_,n,r),r=[],d&&(t[a].status=2,function(h){setTimeout(h,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(u==="nodata"?i.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):i.push(()=>t[a].onComplete(new Error(u),!1,null))))}us(e,e.transactionQueueTree_);for(let a=0;a<i.length;a++)Un(i[a]);ds(e,e.transactionQueueTree_)}function zf(e,t){let n,i=e.transactionQueueTree_;for(n=S(t);n!==null&&Ye(i)===void 0;)i=os(i,n),t=j(t),n=S(t);return i}function Hf(e,t){let n=[];return $f(e,t,n),n.sort((i,r)=>i.order-r.order),n}function $f(e,t,n){let i=Ye(t);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);ss(t,r=>{$f(e,r,n)})}function us(e,t){let n=Ye(t);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,Vl(t,n.length>0?n:void 0)}ss(t,i=>{us(e,i)})}function Hl(e,t){let n=hr(zf(e,t)),i=os(e.transactionQueueTree_,t);return Y0(i,r=>{hc(e,r)}),hc(e,i),Nf(i,r=>{hc(e,r)}),n}function hc(e,t){let n=Ye(t);if(n){let i=[],r=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(f(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(f(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),r=r.concat(Ee(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&i.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?Vl(t,void 0):n.length=o+1,Et(e.eventQueue_,hr(t),r);for(let s=0;s<i.length;s++)Un(i[s])}}function bw(e){let t="",n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function _w(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let i=n.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):lt(`Invalid query segment '${n}' in query '${e}'`)}return t}var rl=function(e,t){let n=vw(e),i=n.namespace;n.domain==="firebase.com"&&Yt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Yt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Yv();let r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Ao(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new O(n.pathString)}},vw=function(e){let t="",n="",i="",r="",o="",s=!0,a="https",c=443;if(typeof e=="string"){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let d=e.indexOf("/");d===-1&&(d=e.length);let u=e.indexOf("?");u===-1&&(u=e.length),t=e.substring(0,Math.min(d,u)),d<u&&(r=bw(e.substring(d,u)));let h=_w(e.substring(Math.min(e.length,u)));l=t.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(t.substring(l+1),10)):l=t.length;let m=t.slice(0,l);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{let g=t.indexOf(".");i=t.substring(0,g).toLowerCase(),n=t.substring(g+1),o=i}"ns"in h&&(o=h.ns)}return{host:t,port:c,domain:n,subdomain:i,secure:s,scheme:a,pathString:r,namespace:o}};var Lm="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",yw=function(){let e=0,t=[];return function(n){let i=n===e;e=n;let r,o=new Array(8);for(r=7;r>=0;r--)o[r]=Lm.charAt(n%64),n=Math.floor(n/64);f(n===0,"Cannot push at time == 0");let s=o.join("");if(i){for(r=11;r>=0&&t[r]===63;r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)s+=Lm.charAt(t[r]);return f(s.length===20,"nextPushId: Length should be 20."),s}}();var Go=class{constructor(t,n,i,r){this.eventType=t,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Z(this.snapshot.exportVal())}},qo=class{constructor(t,n,i){this.eventRegistration=t,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var sr=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return f(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var Ko=class{constructor(t,n){this._repo=t,this._path=n}cancel(){let t=new it;return lw(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Ct("OnDisconnect.remove",this._path);let t=new it;return Fm(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Ct("OnDisconnect.set",this._path),Zt("OnDisconnect.set",t,this._path,!1);let n=new it;return Fm(this._repo,this._path,t,n.wrapCallback(()=>{})),n.promise}setWithPriority(t,n){Ct("OnDisconnect.setWithPriority",this._path),Zt("OnDisconnect.setWithPriority",t,this._path,!1),jl("OnDisconnect.setWithPriority",n,!1);let i=new it;return dw(this._repo,this._path,t,n,i.wrapCallback(()=>{})),i.promise}update(t){Ct("OnDisconnect.update",this._path),Pf("OnDisconnect.update",t,this._path,!1);let n=new it;return uw(this._repo,this._path,t,n.wrapCallback(()=>{})),n.promise}};var ft=class e{constructor(t,n,i,r){this._repo=t,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return A(this._path)?null:wl(this._path)}get ref(){return new It(this._repo,this._path)}get _queryIdentifier(){let t=Em(this._queryParams),n=vl(t);return n==="{}"?"default":n}get _queryObject(){return Em(this._queryParams)}isEqual(t){if(t=dt(t),!(t instanceof e))return!1;let n=this._repo===t._repo,i=Cl(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+Ay(this._path)}};function hs(e,t){if(e._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function ke(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Kt){let i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Se)throw new Error(i);if(typeof t!="string")throw new Error(r)}if(e.hasEnd()){if(e.getIndexEndName()!==oe)throw new Error(i);if(typeof n!="string")throw new Error(r)}}else if(e.getIndex()===B){if(t!=null&&!or(t)||n!=null&&!or(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(f(e.getIndex()instanceof Qi||e.getIndex()===xl,"unknown index type."),t!=null&&typeof t=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ms(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var It=class e extends ft{constructor(t,n){super(t,n,new tr,!1)}get parent(){let t=af(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},jn=class e{constructor(t,n,i){this._node=t,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new O(t),i=Re(this.ref,t);return new e(this._node.getChild(n),i,B)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>t(new e(r,Re(this.ref,i),B)))}hasChild(t){let n=new O(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function $l(e,t){return e=dt(e),e._checkNotDeleted("ref"),t!==void 0?Re(e._root,t):e._root}function Wl(e,t){e=dt(e),e._checkNotDeleted("refFromURL");let n=rl(t,e._repo.repoInfo_.nodeAdmin);Ff("refFromURL",n);let i=n.repoInfo;return!e._repo.repoInfo_.isCustomHost()&&i.host!==e._repo.repoInfo_.host&&Yt("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+e._repo.repoInfo_.host+")"),$l(e,n.path.toString())}function Re(e,t){return e=dt(e),S(e._path)===null?ew("child","path",t,!1):Hn("child","path",t,!1),new It(e._repo,G(e._path,t))}function Wf(e,t){e=dt(e),Ct("push",e._path),Zt("push",t,e._path,!0);let n=Uf(e._repo),i=yw(n),r=Re(e,i),o=Re(e,i),s;return t!=null?s=fs(o,t).then(()=>o):s=Promise.resolve(o),r.then=s.then.bind(s),r.catch=s.then.bind(s,void 0),r}function Gf(e){return Ct("remove",e._path),fs(e,null)}function fs(e,t){e=dt(e),Ct("set",e._path),Zt("set",t,e._path,!1);let n=new it;return Bl(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function qf(e,t){e=dt(e),Ct("setPriority",e._path),jl("setPriority",t,!1);let n=new it;return Bl(e._repo,G(e._path,".priority"),t,null,n.wrapCallback(()=>{})),n.promise}function Kf(e,t,n){if(Ct("setWithPriority",e._path),Zt("setWithPriority",t,e._path,!1),jl("setWithPriority",n,!1),e.key===".length"||e.key===".keys")throw"setWithPriority failed: "+e.key+" is a read-only object.";let i=new it;return Bl(e._repo,e._path,t,n,i.wrapCallback(()=>{})),i.promise}function Yf(e,t){Pf("update",t,e._path,!1);let n=new it;return aw(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function Qf(e){e=dt(e);let t=new sr(()=>{}),n=new ar(t);return sw(e._repo,e,n).then(i=>new jn(i,new It(e._repo,e._path),e._queryParams.getIndex()))}var ar=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let i=n._queryParams.getIndex();return new Go("value",this,new jn(t.snapshotNode,new It(n._repo,n._path),i))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new qo(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Yo=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new qo(this,t,n):null}createEvent(t,n){f(t.childName!=null,"Child events should have a childName.");let i=Re(new It(n._repo,n._path),t.childName),r=n._queryParams.getIndex();return new Go(t.type,this,new jn(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function gr(e,t,n,i,r){let o;if(typeof i=="object"&&(o=void 0,r=i),typeof i=="function"&&(o=i),r&&r.onlyOnce){let c=n,l=(d,u)=>{il(e._repo,e,a),c(d,u)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new sr(n,o||void 0),a=t==="value"?new ar(s):new Yo(t,s);return hw(e._repo,e,a),()=>il(e._repo,e,a)}function ps(e,t,n,i){return gr(e,"value",t,n,i)}function Gl(e,t,n,i){return gr(e,"child_added",t,n,i)}function ql(e,t,n,i){return gr(e,"child_changed",t,n,i)}function Kl(e,t,n,i){return gr(e,"child_moved",t,n,i)}function Yl(e,t,n,i){return gr(e,"child_removed",t,n,i)}function Ql(e,t,n){let i=null,r=n?new sr(n):null;t==="value"?i=new ar(r):t&&(i=new Yo(t,r)),il(e._repo,e,i)}var xt=class{},Qo=class extends xt{constructor(t,n){super(),this._value=t,this._key=n,this.type="endAt"}_apply(t){Zt("endAt",this._value,t._path,!0);let n=Oc(t._queryParams,this._value,this._key);if(ms(n),ke(n),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ft(t._repo,t._path,n,t._orderByCalled)}};function Zf(e,t){return fr("endAt","key",t,!0),new Qo(e,t)}var ol=class extends xt{constructor(t,n){super(),this._value=t,this._key=n,this.type="endBefore"}_apply(t){Zt("endBefore",this._value,t._path,!1);let n=Gy(t._queryParams,this._value,this._key);if(ms(n),ke(n),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ft(t._repo,t._path,n,t._orderByCalled)}};function Xf(e,t){return fr("endBefore","key",t,!0),new ol(e,t)}var Zo=class extends xt{constructor(t,n){super(),this._value=t,this._key=n,this.type="startAt"}_apply(t){Zt("startAt",this._value,t._path,!0);let n=Nc(t._queryParams,this._value,this._key);if(ms(n),ke(n),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ft(t._repo,t._path,n,t._orderByCalled)}};function Jf(e=null,t){return fr("startAt","key",t,!0),new Zo(e,t)}var sl=class extends xt{constructor(t,n){super(),this._value=t,this._key=n,this.type="startAfter"}_apply(t){Zt("startAfter",this._value,t._path,!1);let n=Wy(t._queryParams,this._value,this._key);if(ms(n),ke(n),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ft(t._repo,t._path,n,t._orderByCalled)}};function tp(e,t){return fr("startAfter","key",t,!0),new sl(e,t)}var al=class extends xt{constructor(t){super(),this._limit=t,this.type="limitToFirst"}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ft(t._repo,t._path,Hy(t._queryParams,this._limit),t._orderByCalled)}};function ep(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new al(e)}var cl=class extends xt{constructor(t){super(),this._limit=t,this.type="limitToLast"}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ft(t._repo,t._path,$y(t._queryParams,this._limit),t._orderByCalled)}};function np(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new cl(e)}var ll=class extends xt{constructor(t){super(),this._path=t,this.type="orderByChild"}_apply(t){hs(t,"orderByChild");let n=new O(this._path);if(A(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let i=new Qi(n),r=Jo(t._queryParams,i);return ke(r),new ft(t._repo,t._path,r,!0)}};function ip(e){if(e==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(e==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(e==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Hn("orderByChild","path",e,!1),new ll(e)}var dl=class extends xt{constructor(){super(...arguments),this.type="orderByKey"}_apply(t){hs(t,"orderByKey");let n=Jo(t._queryParams,Kt);return ke(n),new ft(t._repo,t._path,n,!0)}};function rp(){return new dl}var ul=class extends xt{constructor(){super(...arguments),this.type="orderByPriority"}_apply(t){hs(t,"orderByPriority");let n=Jo(t._queryParams,B);return ke(n),new ft(t._repo,t._path,n,!0)}};function op(){return new ul}var hl=class extends xt{constructor(){super(...arguments),this.type="orderByValue"}_apply(t){hs(t,"orderByValue");let n=Jo(t._queryParams,xl);return ke(n),new ft(t._repo,t._path,n,!0)}};function sp(){return new hl}var ml=class extends xt{constructor(t,n){super(),this._value=t,this._key=n,this.type="equalTo"}_apply(t){if(Zt("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Qo(this._value,this._key)._apply(new Zo(this._value,this._key)._apply(t))}};function ap(e,t){return fr("equalTo","key",t,!0),new ml(e,t)}function Ot(e,...t){let n=dt(e);for(let i of t)n=i._apply(n);return n}A0(It);M0(It);var ww="FIREBASE_DATABASE_EMULATOR_HOST",fl={},Cw=!1;function Ew(e,t,n,i){e.repoInfo_=new Ao(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}function Zl(e,t,n,i,r){let o=i||e.options.databaseURL;o===void 0&&(e.options.projectId||Yt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ot("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=rl(o,r),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[ww]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=rl(o,r),a=s.repoInfo):c=!s.repoInfo.secure;let d=r&&c?new $i($i.OWNER):new _c(e.name,e.options,t);Ff("Invalid Firebase Database URL",s),A(s.path)||Yt("Database URL must point to the root of a Firebase Database (not including a child path).");let u=xw(a,e,d,new bc(e.name,n));return new pl(u,e)}function Iw(e,t){let n=fl[t];(!n||n[e.key]!==e)&&Yt(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Bf(e),delete n[e.key]}function xw(e,t,n,i){let r=fl[t.name];r||(r={},fl[t.name]=r);let o=r[e.toURLString()];return o&&Yt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new nl(e,Cw,n,i),r[e.toURLString()]=o,o}var pl=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(rw(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new It(this._repo,N())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Iw(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Yt("Cannot call "+t+" on a deleted database.")}};function cp(){sf.IS_TRANSPORT_INITIALIZED&&lt("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function lp(){cp(),Ki.forceDisallow()}function dp(){cp(),Dn.forceDisallow(),Ki.forceAllow()}function up(e,t,n,i={}){e=dt(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Yt("Cannot call useEmulator() after instance has already been initialized.");let r=e._repoInternal,o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Yt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new $i($i.OWNER);else if(i.mockUserToken){let s=typeof i.mockUserToken=="string"?i.mockUserToken:iu(i.mockUserToken,e.app.options.projectId);o=new $i(s)}Ew(r,t,n,o)}function hp(e){e=dt(e),e._checkNotDeleted("goOffline"),Bf(e._repo)}function mp(e){e=dt(e),e._checkNotDeleted("goOnline"),mw(e._repo)}function fp(e,t){Bm(e,t)}function Sw(e){_l(mu),si(new ee("database",(t,{instanceIdentifier:n})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return Zl(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),be(sm,am,e),be(sm,am,"esm2017")}var Aw={".sv":"timestamp"};function pp(){return Aw}function gp(e){return{".sv":{increment:e}}}var gl=class{constructor(t,n){this.committed=t,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function bp(e,t,n){var i;if(e=dt(e),Ct("Reference.transaction",e._path),e.key===".length"||e.key===".keys")throw"Reference.transaction failed: "+e.key+" is a read-only object.";let r=(i=n?.applyLocally)!==null&&i!==void 0?i:!0,o=new it,s=(c,l,d)=>{let u=null;c?o.reject(c):(u=new jn(d,new It(e._repo,e._path),B),o.resolve(new gl(l,u)))},a=ps(e,()=>{});return fw(e._repo,e._path,t,s,a,r),o.promise}El.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};El.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};Sw();var Tw="@firebase/database-compat",Dw="1.0.5";var Rw=new mn("@firebase/database-compat"),_p=function(e){let t="FIREBASE WARNING: "+e;Rw.warn(t)};var kw=function(e,t,n,i){if(!(i&&n===void 0)&&typeof n!="boolean")throw new Error(pt(e,t)+"must be a boolean.")},Mw=function(e,t,n){if(!(n&&t===void 0))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(pt(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var Xl=class{constructor(t){this._delegate=t}cancel(t){w("OnDisconnect.cancel",0,1,arguments.length),J("OnDisconnect.cancel","onComplete",t,!0);let n=this._delegate.cancel();return t&&n.then(()=>t(null),i=>t(i)),n}remove(t){w("OnDisconnect.remove",0,1,arguments.length),J("OnDisconnect.remove","onComplete",t,!0);let n=this._delegate.remove();return t&&n.then(()=>t(null),i=>t(i)),n}set(t,n){w("OnDisconnect.set",1,2,arguments.length),J("OnDisconnect.set","onComplete",n,!0);let i=this._delegate.set(t);return n&&i.then(()=>n(null),r=>n(r)),i}setWithPriority(t,n,i){w("OnDisconnect.setWithPriority",2,3,arguments.length),J("OnDisconnect.setWithPriority","onComplete",i,!0);let r=this._delegate.setWithPriority(t,n);return i&&r.then(()=>i(null),o=>i(o)),r}update(t,n){if(w("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){let r={};for(let o=0;o<t.length;++o)r[""+o]=t[o];t=r,_p("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}J("OnDisconnect.update","onComplete",n,!0);let i=this._delegate.update(t);return n&&i.then(()=>n(null),r=>n(r)),i}};var Jl=class{constructor(t,n){this.committed=t,this.snapshot=n}toJSON(){return w("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var Qe=class e{constructor(t,n){this._database=t,this._delegate=n}val(){return w("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return w("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return w("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return w("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return w("DataSnapshot.child",0,1,arguments.length),t=String(t),Hn("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}hasChild(t){return w("DataSnapshot.hasChild",1,1,arguments.length),Hn("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return w("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return w("DataSnapshot.forEach",1,1,arguments.length),J("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(n=>t(new e(this._database,n)))}hasChildren(){return w("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return w("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return w("DataSnapshot.ref",0,0,arguments.length),new se(this._database,this._delegate.ref)}get ref(){return this.getRef()}},gs=class e{constructor(t,n){this.database=t,this._delegate=n}on(t,n,i,r){var o;w("Query.on",2,4,arguments.length),J("Query.on","callback",n,!1);let s=e.getCancelAndContextArgs_("Query.on",i,r),a=(l,d)=>{n.call(s.context,new Qe(this.database,l),d)};a.userCallback=n,a.context=s.context;let c=(o=s.cancel)===null||o===void 0?void 0:o.bind(s.context);switch(t){case"value":return ps(this._delegate,a,c),n;case"child_added":return Gl(this._delegate,a,c),n;case"child_removed":return Yl(this._delegate,a,c),n;case"child_changed":return ql(this._delegate,a,c),n;case"child_moved":return Kl(this._delegate,a,c),n;default:throw new Error(pt("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,n,i){if(w("Query.off",0,3,arguments.length),Mw("Query.off",t,!0),J("Query.off","callback",n,!0),Bs("Query.off","context",i,!0),n){let r=()=>{};r.userCallback=n,r.context=i,Ql(this._delegate,t,r)}else Ql(this._delegate,t)}get(){return Qf(this._delegate).then(t=>new Qe(this.database,t))}once(t,n,i,r){w("Query.once",1,4,arguments.length),J("Query.once","callback",n,!0);let o=e.getCancelAndContextArgs_("Query.once",i,r),s=new it,a=(l,d)=>{let u=new Qe(this.database,l);n&&n.call(o.context,u,d),s.resolve(u)};a.userCallback=n,a.context=o.context;let c=l=>{o.cancel&&o.cancel.call(o.context,l),s.reject(l)};switch(t){case"value":ps(this._delegate,a,c,{onlyOnce:!0});break;case"child_added":Gl(this._delegate,a,c,{onlyOnce:!0});break;case"child_removed":Yl(this._delegate,a,c,{onlyOnce:!0});break;case"child_changed":ql(this._delegate,a,c,{onlyOnce:!0});break;case"child_moved":Kl(this._delegate,a,c,{onlyOnce:!0});break;default:throw new Error(pt("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(t){return w("Query.limitToFirst",1,1,arguments.length),new e(this.database,Ot(this._delegate,ep(t)))}limitToLast(t){return w("Query.limitToLast",1,1,arguments.length),new e(this.database,Ot(this._delegate,np(t)))}orderByChild(t){return w("Query.orderByChild",1,1,arguments.length),new e(this.database,Ot(this._delegate,ip(t)))}orderByKey(){return w("Query.orderByKey",0,0,arguments.length),new e(this.database,Ot(this._delegate,rp()))}orderByPriority(){return w("Query.orderByPriority",0,0,arguments.length),new e(this.database,Ot(this._delegate,op()))}orderByValue(){return w("Query.orderByValue",0,0,arguments.length),new e(this.database,Ot(this._delegate,sp()))}startAt(t=null,n){return w("Query.startAt",0,2,arguments.length),new e(this.database,Ot(this._delegate,Jf(t,n)))}startAfter(t=null,n){return w("Query.startAfter",0,2,arguments.length),new e(this.database,Ot(this._delegate,tp(t,n)))}endAt(t=null,n){return w("Query.endAt",0,2,arguments.length),new e(this.database,Ot(this._delegate,Zf(t,n)))}endBefore(t=null,n){return w("Query.endBefore",0,2,arguments.length),new e(this.database,Ot(this._delegate,Xf(t,n)))}equalTo(t,n){return w("Query.equalTo",1,2,arguments.length),new e(this.database,Ot(this._delegate,ap(t,n)))}toString(){return w("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return w("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if(w("Query.isEqual",1,1,arguments.length),!(t instanceof e)){let n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,n,i){let r={cancel:void 0,context:void 0};if(n&&i)r.cancel=n,J(t,"cancel",r.cancel,!0),r.context=i,Bs(t,"context",r.context,!0);else if(n)if(typeof n=="object"&&n!==null)r.context=n;else if(typeof n=="function")r.cancel=n;else throw new Error(pt(t,"cancelOrContext")+" must either be a cancel callback or a context object.");return r}get ref(){return new se(this.database,new It(this._delegate._repo,this._delegate._path))}},se=class e extends gs{constructor(t,n){super(t,new ft(n._repo,n._path,new tr,!1)),this.database=t,this._delegate=n}getKey(){return w("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return w("Reference.child",1,1,arguments.length),typeof t=="number"&&(t=String(t)),new e(this.database,Re(this._delegate,t))}getParent(){w("Reference.parent",0,0,arguments.length);let t=this._delegate.parent;return t?new e(this.database,t):null}getRoot(){return w("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)}set(t,n){w("Reference.set",1,2,arguments.length),J("Reference.set","onComplete",n,!0);let i=fs(this._delegate,t);return n&&i.then(()=>n(null),r=>n(r)),i}update(t,n){if(w("Reference.update",1,2,arguments.length),Array.isArray(t)){let r={};for(let o=0;o<t.length;++o)r[""+o]=t[o];t=r,_p("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ct("Reference.update",this._delegate._path),J("Reference.update","onComplete",n,!0);let i=Yf(this._delegate,t);return n&&i.then(()=>n(null),r=>n(r)),i}setWithPriority(t,n,i){w("Reference.setWithPriority",2,3,arguments.length),J("Reference.setWithPriority","onComplete",i,!0);let r=Kf(this._delegate,t,n);return i&&r.then(()=>i(null),o=>i(o)),r}remove(t){w("Reference.remove",0,1,arguments.length),J("Reference.remove","onComplete",t,!0);let n=Gf(this._delegate);return t&&n.then(()=>t(null),i=>t(i)),n}transaction(t,n,i){w("Reference.transaction",1,3,arguments.length),J("Reference.transaction","transactionUpdate",t,!1),J("Reference.transaction","onComplete",n,!0),kw("Reference.transaction","applyLocally",i,!0);let r=bp(this._delegate,t,{applyLocally:i}).then(o=>new Jl(o.committed,new Qe(this.database,o.snapshot)));return n&&r.then(o=>n(null,o.committed,o.snapshot),o=>n(o,!1,null)),r}setPriority(t,n){w("Reference.setPriority",1,2,arguments.length),J("Reference.setPriority","onComplete",n,!0);let i=qf(this._delegate,t);return n&&i.then(()=>n(null),r=>n(r)),i}push(t,n){w("Reference.push",0,2,arguments.length),J("Reference.push","onComplete",n,!0);let i=Wf(this._delegate,t),r=i.then(s=>new e(this.database,s));n&&r.then(()=>n(null),s=>n(s));let o=new e(this.database,i);return o.then=r.then.bind(r),o.catch=r.catch.bind(r,void 0),o}onDisconnect(){return Ct("Reference.onDisconnect",this._delegate._path),new Xl(new Ko(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var Ze=class{constructor(t,n){this._delegate=t,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:lp,forceLongPolling:dp}}useEmulator(t,n,i={}){up(this._delegate,t,n,i)}ref(t){if(w("database.ref",0,1,arguments.length),t instanceof se){let n=Wl(this._delegate,t.toString());return new se(this,n)}else{let n=$l(this._delegate,t);return new se(this,n)}}refFromURL(t){w("database.refFromURL",1,1,arguments.length);let i=Wl(this._delegate,t);return new se(this,i)}goOffline(){return w("database.goOffline",0,0,arguments.length),hp(this._delegate)}goOnline(){return w("database.goOnline",0,0,arguments.length),mp(this._delegate)}};Ze.ServerValue={TIMESTAMP:pp(),increment:e=>gp(e)};function Nw({app:e,url:t,version:n,customAuthImpl:i,customAppCheckImpl:r,namespace:o,nodeAdmin:s=!1}){_l(n);let a=new zs("database-standalone"),c=new Br("auth-internal",a);c.setComponent(new ee("auth-internal",()=>i,"PRIVATE"));let l;return r&&(l=new Br("app-check-internal",a),l.setComponent(new ee("app-check-internal",()=>r,"PRIVATE"))),{instance:new Ze(Zl(e,c,l,t,s),e),namespace:o}}var Ow=Object.freeze({__proto__:null,initStandalone:Nw});var Pw=Ze.ServerValue;function Fw(e){e.INTERNAL.registerComponent(new ee("database-compat",(t,{instanceIdentifier:n})=>{let i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:n});return new Ze(r,i)},"PUBLIC").setServiceProps({Reference:se,Query:gs,Database:Ze,DataSnapshot:Qe,enableLogging:fp,INTERNAL:Ow,ServerValue:Pw}).setMultipleInstances(!0)),e.registerVersion(Tw,Dw)}Fw(ut);function br(e,t,n="on",i=wr){return new ae(r=>{let o=null;return o=e[n](t,(s,a)=>{i.schedule(()=>{r.next({snapshot:s,prevKey:a})}),n==="once"&&i.schedule(()=>r.complete())},s=>{i.schedule(()=>r.error(s))}),n==="on"?{unsubscribe(){o!=null&&e.off(t,o)}}:{unsubscribe(){}}}).pipe(I(r=>{let{snapshot:o,prevKey:s}=r,a=null;return o.exists()&&(a=o.key),{type:t,payload:o,prevKey:s,key:a}}),wd())}function Lw(e){return typeof e=="string"}function Vw(e){return typeof e.exportVal=="function"}function Ep(e){return e==null}function Ip(e){return typeof e.set=="function"}function vp(e,t){return Ip(t)?t:e.ref(t)}function xp(e,t){if(Lw(e))return t.stringCase();if(Ip(e))return t.firebaseCase();if(Vw(e))return t.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof e}`)}function Sp(e){return(Ep(e)||e.length===0)&&(e=["child_added","child_removed","child_changed","child_moved"]),e}function Ap(e,t,n){t=Sp(t);let i=t.map(r=>br(e,r,"on",n));return Gn(...i)}function jw(e,t,n){let i=Ap(e,t).pipe(qn((r,o)=>[...r,o],[]));return Bw(e,i,n)}function Uw(e,t){return br(e,"value","on",t).pipe(I(n=>{let i;return n.payload.forEach(r=>(i=r.key,!1)),{data:n,lastKeyToLoad:i}}))}function Bw(e,t,n){return Uw(e,n).pipe(Id(t),I(([r,o])=>{let s=r.lastKeyToLoad,a=o.map(c=>c.key);return{actions:o,lastKeyToLoad:s,loadedKeys:a}}),Ed(r=>r.loadedKeys.indexOf(r.lastKeyToLoad)===-1),I(r=>r.actions))}function yp(e,t){return function(i,r){return xp(i,{stringCase:()=>e.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function zw(e){return function(n){return n?xp(n,{stringCase:()=>e.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):e.remove()}}function Hw(e,t,n){return br(e,"value","once",n).pipe(Q(i=>{let r=[_(i)];return t.forEach(o=>r.push(br(e,o,"on",n))),Gn(...r).pipe(qn(Ww,[]))}),vd())}function Tp(e,t){let n=e.length;for(let i=0;i<n;i++)if(e[i].payload.key===t)return i;return-1}function $w(e,t){if(Ep(t))return 0;{let n=Tp(e,t);return n===-1?e.length:n+1}}function Ww(e,t){let{payload:n,prevKey:i,key:r}=t,o=Tp(e,r),s=$w(e,i);switch(t.type){case"value":if(t.payload?.exists()){let a=null;t.payload.forEach(c=>{let l={payload:c,type:"value",prevKey:a,key:c.key};return a=c.key,e=[...e,l],!1})}return e;case"child_added":if(o>-1)(e[o-1]?.key||null)!==i&&(e=e.filter(c=>c.payload.key!==n.key),e.splice(s,0,t));else{if(i==null)return[t,...e];e=e.slice(),e.splice(s,0,t)}return e;case"child_removed":return e.filter(a=>a.payload.key!==n.key);case"child_changed":return e.map(a=>a.payload.key===r?t:a);case"child_moved":if(o>-1){let a=e.splice(o,1)[0];return e=e.slice(),e.splice(s,0,a),e}return e;default:return e}}function wp(e,t,n){return t=Sp(t),Hw(e,t,n)}function Gw(e,t){let n=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>e.ref);return{query:e,update:yp(i,"update"),set:yp(i,"set"),push:r=>i.push(r),remove:zw(i),snapshotChanges(r){return wp(e,r,n).pipe(re)},stateChanges(r){return Ap(e,r,n).pipe(re)},auditTrail(r){return jw(e,r,n).pipe(re)},valueChanges(r,o){return wp(e,r,n).pipe(I(a=>a.map(c=>o&&o.idField?U(b({},c.payload.val()),{[o.idField]:c.key}):c.payload.val())),re)}}}function Cp(e,t){return function(){return br(e,"value","on",t)}}function qw(e,t){return{query:e,snapshotChanges(){return Cp(e,t.schedulers.outsideAngular)().pipe(re)},update(n){return e.ref.update(n)},set(n){return e.ref.set(n)},remove(){return e.ref.remove()},valueChanges(){return Cp(e,t.schedulers.outsideAngular)().pipe(re,I(i=>i.payload.exists()?i.payload.val():null))}}}var Kw=new T("angularfire2.realtimeDatabaseURL"),Yw=new T("angularfire2.database.use-emulator"),td=(()=>{class e{schedulers;database;constructor(n,i,r,o,s,a,c,l,d,u,h,m,g,y,R){this.schedulers=a;let $=c,tt=Li(n,s,i);l&&oc(tt,s,d,h,m,g,u,y),this.database=Io(`${tt.name}.database.${r}`,"AngularFireDatabase",tt.name,()=>{let z=s.runOutsideAngular(()=>tt.database(r||void 0));return $&&z.useEmulator(...$),z},[$])}list(n,i){let r=this.schedulers.ngZone.runOutsideAngular(()=>vp(this.database,n)),o=r;return i&&(o=i(r)),Gw(o,this)}object(n){let i=this.schedulers.ngZone.runOutsideAngular(()=>vp(this.database,n));return qw(i,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(i){return new(i||e)(p(Sn),p(An,8),p(Kw,8),p(vt),p(L),p(wo),p(Yw,8),p(Vi,8),p(Ja,8),p(tc,8),p(ec,8),p(nc,8),p(ic,8),p(rc,8),p(Be,8))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})(),Dp=(()=>{class e{constructor(){ut.registerVersion("angularfire",ze.full,"rtdb-compat")}static \u0275fac=function(i){return new(i||e)};static \u0275mod=M({type:e});static \u0275inj=k({providers:[td]})}return e})();function Zw(e,t){if(e&1){let n=kr();W(0,"li",4)(1,"div",5)(2,"p")(3,"strong"),K(4,"Email:"),V(),K(5),V(),W(6,"p")(7,"strong"),K(8,"Name:"),V(),K(9),V(),W(10,"p")(11,"strong"),K(12,"Phone:"),V(),K(13),V(),W(14,"p")(15,"strong"),K(16,"Company:"),V(),K(17),V(),W(18,"p")(19,"strong"),K(20,"Position:"),V(),K(21),V()(),W(22,"div",6)(23,"button",7),Vt("click",function(){let r=he(n).$implicit,o=cn();return me(o.approveUser(r))}),K(24,"Approve"),V(),W(25,"button",8),Vt("click",function(){let r=he(n).$implicit,o=cn();return me(o.rejectUser(r))}),K(26,"Reject"),V()()()}if(e&2){let n=t.$implicit;at(5),pe(" ",n.email,""),at(4),pe(" ",n.name,""),at(4),pe(" ",n.phone,""),at(4),pe(" ",n.company,""),at(4),pe(" ",n.position,"")}}var ed=(()=>{let t=class t{constructor(i,r){this.db=i,this.auth=r,this.pendingUsers=[],this.pendingUsersCount=0}ngOnInit(){this.getPendingUsersCount(),this.fetchPendingUsers()}getPendingUsersCount(){this.db.list("users").snapshotChanges().subscribe(i=>{this.pendingUsersCount=i.length})}fetchPendingUsers(){this.db.list("users").snapshotChanges().subscribe(i=>{this.pendingUsers=i.map(r=>{let o=r.payload.val(),s=r.key;return U(b({},o),{key:s})})})}approveUser(i){this.auth.createUserWithEmailAndPassword(i.email,i.password).then(()=>{this.db.list("users").remove(i.key).then(()=>{alert("User approved successfully!")}).catch(r=>{console.error(r),alert("Error removing user because the email already used!")})}).catch(r=>{console.error(r),alert("Error approving user: "+r.message)})}rejectUser(i){this.db.list("users").remove(i.key).then(()=>{alert("User rejected successfully!")}).catch(r=>{console.error(r),alert("Error rejecting user: "+r.message)})}};t.\u0275fac=function(r){return new(r||t)(F(td),F(Vi))},t.\u0275cmp=_t({type:t,selectors:[["app-user"]],decls:6,vars:2,consts:[[1,"user-management-container"],[1,"header"],[1,"user-list"],["class","user-item",4,"ngFor","ngForOf"],[1,"user-item"],[1,"user-details"],[1,"user-actions"],[1,"approve-btn",3,"click"],[1,"reject-btn",3,"click"]],template:function(r,o){r&1&&(W(0,"div",0)(1,"div",1)(2,"h2"),K(3),V()(),W(4,"ul",2),ei(5,Zw,27,5,"li",3),V()()),r&2&&(at(3),pe("Pending User Registrations: ",o.pendingUsersCount,""),at(2),Pe("ngForOf",o.pendingUsers))},dependencies:[Yd],styles:[".user-management-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}h2[_ngcontent-%COMP%]{color:red;margin:0}.action-button[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;background-color:#000;color:#fff}.user-list[_ngcontent-%COMP%]{list-style-type:none;padding:0}.user-item[_ngcontent-%COMP%]{border:2px solid black;border-radius:8px;margin-bottom:20px;padding:20px}.user-details[_ngcontent-%COMP%]{margin-bottom:10px}.user-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.user-actions[_ngcontent-%COMP%]{text-align:right}.approve-btn[_ngcontent-%COMP%], .reject-btn[_ngcontent-%COMP%]{padding:8px 16px;margin-left:10px;border:none;border-radius:4px;cursor:pointer}.approve-btn[_ngcontent-%COMP%]{background-color:green;color:#fff}.reject-btn[_ngcontent-%COMP%]{background-color:red;color:#fff}@media (max-width: 768px){.user-item[_ngcontent-%COMP%]{padding:15px}.user-actions[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.approve-btn[_ngcontent-%COMP%], .reject-btn[_ngcontent-%COMP%]{margin-left:0;margin-right:10px}}"]});let e=t;return e})();var Xw=[{path:"",component:ed},{path:"login",component:Bh},{path:"user",component:ed}],Rp=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=M({type:t}),t.\u0275inj=k({imports:[ki.forRoot(Xw),ki]});let e=t;return e})();var kp=(()=>{let t=class t{constructor(){this.title="admin"}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=_t({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(r,o){r&1&&te(0,"router-outlet")},dependencies:[Da]});let e=t;return e})();var Jw="@",tC=(()=>{let t=class t{constructor(i,r,o,s,a){this.doc=i,this.delegate=r,this.zone=o,this.animationType=s,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=v(Rd,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-XN4RDX4W.js")).catch(r=>{throw new H(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:o})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let s=new o(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(i,r){let o=this.delegate.createRenderer(i,r);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let s=new nd(o);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let c=a.createRenderer(i,r);s.use(c)}).catch(a=>{s.use(o)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(r){ti()},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})(),nd=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let n of this.replay)n(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,n){this.delegate.appendChild(t,n)}insertBefore(t,n,i,r){this.delegate.insertBefore(t,n,i,r)}removeChild(t,n,i){this.delegate.removeChild(t,n,i)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,i,r){this.delegate.setAttribute(t,n,i,r)}removeAttribute(t,n,i){this.delegate.removeAttribute(t,n,i)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,i,r){this.delegate.setStyle(t,n,i,r)}removeStyle(t,n,i){this.delegate.removeStyle(t,n,i)}setProperty(t,n,i){this.shouldReplay(n)&&this.replay.push(r=>r.setProperty(t,n,i)),this.delegate.setProperty(t,n,i)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,i){return this.shouldReplay(n)&&this.replay.push(r=>r.listen(t,n,i)),this.delegate.listen(t,n,i)}shouldReplay(t){return this.replay!==null&&t.startsWith(Jw)}};function Mp(e="animations"){return kd("NgAsyncAnimations"),Sr([{provide:Dr,useFactory:(t,n,i)=>new tC(t,n,i,e),deps:[ct,Hr,L]},{provide:Ts,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Np={production:!1,firebaseConfig:{apiKey:"AIzaSyDFxmhQP-bAn4TLyCCeMQMh-EnFFx6P8QE",authDomain:"arp-test-343ca.firebaseapp.com",databaseURL:"https://arp-test-343ca-default-rtdb.firebaseio.com",projectId:"arp-test-343ca",storageBucket:"arp-test-343ca.appspot.com",messagingSenderId:"353751654656",appId:"1:353751654656:android:f7423d2a6125d4b0f113e5"}};var id;try{id=typeof Intl<"u"&&Intl.v8BreakIterator}catch{id=!1}var vr=(()=>{let t=class t{constructor(i){this._platformId=i,this.isBrowser=this._platformId?Xd(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||id)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(r){return new(r||t)(p(vt))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var _r;function eC(){if(_r==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>_r=!0}))}finally{_r=_r||!1}return _r}function rd(e){return eC()?e:!!e.capture}function Op(e){return e.composedPath?e.composedPath()[0]:e.target}function Pp(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function od(e){return Array.isArray(e)?e:[e]}function sd(e){return e instanceof Tt?e.nativeElement:e}var Lp=new Set,Xe,nC=(()=>{let t=class t{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):rC}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&iC(i,this._nonce),this._matchMedia(i)}};t.\u0275fac=function(r){return new(r||t)(p(vr),p(Xn,8))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function iC(e,t){if(!Lp.has(e))try{Xe||(Xe=document.createElement("style"),t&&Xe.setAttribute("nonce",t),Xe.setAttribute("type","text/css"),document.head.appendChild(Xe)),Xe.sheet&&(Xe.sheet.insertRule(`@media ${e} {body{ }}`,0),Lp.add(e))}catch(n){console.error(n)}}function rC(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var jp=(()=>{let t=class t{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Lt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return Vp(od(i)).some(o=>this._registerQuery(o).mql.matches)}observe(i){let o=Vp(od(i)).map(a=>this._registerQuery(a).observable),s=en(o);return s=Cr(s.pipe(le(1)),s.pipe(Cd(1),bd(0))),s.pipe(I(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:d})=>{c.matches=c.matches||l,c.breakpoints[d]=l}),c}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),s={observable:new ae(a=>{let c=l=>this._zone.run(()=>a.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(Ir(r),I(({matches:a})=>({query:i,matches:a})),xr(this._destroySubject)),mql:r};return this._queries.set(i,s),s}};t.\u0275fac=function(r){return new(r||t)(p(nC),p(L))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Vp(e){return e.map(t=>t.split(",")).reduce((t,n)=>t.concat(n)).map(t=>t.trim())}function zp(e){return e.buttons===0||e.detail===0}function Hp(e){let t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var Je=function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e}(Je||{}),Up="cdk-high-contrast-black-on-white",Bp="cdk-high-contrast-white-on-black",ad="cdk-high-contrast-active",$p=(()=>{let t=class t{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=v(jp).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Je.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(i):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(i.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Je.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Je.BLACK_ON_WHITE}return Je.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(ad,Up,Bp),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Je.BLACK_ON_WHITE?i.add(ad,Up):r===Je.WHITE_ON_BLACK&&i.add(ad,Bp)}}};t.\u0275fac=function(r){return new(r||t)(p(vr),p(ct))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var cd=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=M({type:t}),t.\u0275inj=k({});let e=t;return e})();function sC(){return!0}var aC=new T("mat-sanity-checks",{providedIn:"root",factory:sC}),gt=(()=>{let t=class t{constructor(i,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return Pp()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};t.\u0275fac=function(r){return new(r||t)(p($p),p(aC,8),p(ct))},t.\u0275mod=M({type:t}),t.\u0275inj=k({imports:[cd,cd]});let e=t;return e})();var Pt=function(e){return e[e.FADING_IN=0]="FADING_IN",e[e.VISIBLE=1]="VISIBLE",e[e.FADING_OUT=2]="FADING_OUT",e[e.HIDDEN=3]="HIDDEN",e}(Pt||{}),ld=class{constructor(t,n,i,r=!1){this._renderer=t,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Pt.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},Wp=rd({passive:!0,capture:!0}),dd=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let n=Op(t);n&&this._events.get(t.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(t))})}}addHandler(t,n,i,r){let o=this._events.get(n);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,Wp)})}removeHandler(t,n,i){let r=this._events.get(t);if(!r)return;let o=r.get(n);o&&(o.delete(i),o.size===0&&r.delete(n),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,Wp)))}},Gp={enterDuration:225,exitDuration:150},cC=800,qp=rd({passive:!0,capture:!0}),Kp=["mousedown","touchstart"],Yp=["mouseup","mouseleave","touchend","touchcancel"],yr=class yr{constructor(t,n,i,r){this._target=t,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=sd(i))}fadeInRipple(t,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=b(b({},Gp),i.animation);i.centered&&(t=r.left+r.width/2,n=r.top+r.height/2);let s=i.radius||lC(t,n,r),a=t-r.left,c=n-r.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-s}px`,d.style.top=`${c-s}px`,d.style.height=`${s*2}px`,d.style.width=`${s*2}px`,i.color!=null&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),h=u.transitionProperty,m=u.transitionDuration,g=h==="none"||m==="0s"||m==="0s, 0s"||r.width===0&&r.height===0,y=new ld(this,d,i,g);d.style.transform="scale3d(1, 1, 1)",y.state=Pt.FADING_IN,i.persistent||(this._mostRecentTransientRipple=y);let R=null;return!g&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let $=()=>this._finishRippleTransition(y),tt=()=>this._destroyRipple(y);d.addEventListener("transitionend",$),d.addEventListener("transitioncancel",tt),R={onTransitionEnd:$,onTransitionCancel:tt}}),this._activeRipples.set(y,R),(g||!l)&&this._finishRippleTransition(y),y}fadeOutRipple(t){if(t.state===Pt.FADING_OUT||t.state===Pt.HIDDEN)return;let n=t.element,i=b(b({},Gp),t.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",t.state=Pt.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let n=sd(t);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,Kp.forEach(i=>{yr._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Yp.forEach(n=>{this._triggerElement.addEventListener(n,this,qp)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Pt.FADING_IN?this._startFadeOutTransition(t):t.state===Pt.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let n=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=Pt.VISIBLE,!i&&(!n||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let n=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Pt.HIDDEN,n!==null&&(t.element.removeEventListener("transitionend",n.onTransitionEnd),t.element.removeEventListener("transitioncancel",n.onTransitionCancel)),t.element.remove()}_onMousedown(t){let n=zp(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+cC;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Hp(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=t.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let n=t.state===Pt.VISIBLE||t.config.terminateOnPointerUp&&t.state===Pt.FADING_IN;!t.config.persistent&&n&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(Kp.forEach(n=>yr._eventManager.removeHandler(n,t,this)),this._pointerUpEventsRegistered&&(Yp.forEach(n=>t.removeEventListener(n,this,qp)),this._pointerUpEventsRegistered=!1))}};yr._eventManager=new dd;var Qp=yr;function lC(e,t,n){let i=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),r=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(i*i+r*r)}var Zp=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=M({type:t}),t.\u0275inj=k({imports:[gt,gt]});let e=t;return e})();var Jp=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=M({type:t}),t.\u0275inj=k({imports:[gt,Zp,gt]});let e=t;return e})();var tg=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=M({type:t}),t.\u0275inj=k({imports:[gt,Lr,gt]});let e=t;return e})();var eg=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=M({type:t}),t.\u0275inj=k({imports:[gt,gt]});let e=t;return e})();var ng=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=M({type:t}),t.\u0275inj=k({imports:[gt,gt]});let e=t;return e})();var ig=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=M({type:t,bootstrap:[kp]}),t.\u0275inj=k({providers:[Mp()],imports:[Cu,Rp,im.initializeApp(Np.firebaseConfig),Dp,rm,Jp,tg,eg,ng,Uh,ki]});let e=t;return e})();wu().bootstrapModule(ig).catch(e=>console.error(e));
